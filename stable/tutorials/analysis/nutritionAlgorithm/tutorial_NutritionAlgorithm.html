<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,IE=9,chrome=1"><meta name="generator" content="MATLAB 2025b"><title>Nutrition Algorithm Walkthrough</title><style type="text/css">.rtcContent { padding: 30px; } .S0 { margin: 3px 10px 5px 4px; padding: 0px; line-height: 28.8px; min-height: 0px; white-space: pre-wrap; color: rgb(192, 76, 11); font-family: Helvetica, Arial, sans-serif, Helvetica, Arial, sans-serif; font-style: normal; font-size: 24px; font-weight: 400; text-align: left;  }
.S1 { margin: 2px 10px 9px 4px; padding: 0px; line-height: 21px; min-height: 0px; white-space: pre-wrap; color: rgb(33, 33, 33); font-family: Helvetica, Arial, sans-serif, Helvetica, Arial, sans-serif; font-style: normal; font-size: 14px; font-weight: 400; text-align: left;  }
.CodeBlock { background-color: #F5F5F5; margin: 10px 15px 10px 0; display: inline-block; min-width: 100%; }
.S2 { border-left: 1px solid rgb(217, 217, 217); border-right: 1px solid rgb(217, 217, 217); border-top: 1px solid rgb(217, 217, 217); border-bottom: 0px none rgb(33, 33, 33); border-radius: 4px 4px 0px 0px; padding: 6px 45px 0px 13px; line-height: 18.004px; min-height: 0px; white-space: nowrap; color: rgb(33, 33, 33); font-family: Menlo, Monaco, Consolas, "Courier New", monospace, Menlo, Monaco, Consolas, "Courier New", monospace; font-size: 14px;  }
.eoOutputWrapper { width: calc(90vw - 10px) !important; }
.S3 { border-left: 1px solid rgb(217, 217, 217); border-right: 1px solid rgb(217, 217, 217); border-top: 0px none rgb(33, 33, 33); border-bottom: 1px solid rgb(217, 217, 217); border-radius: 0px; padding: 0px 45px 4px 13px; line-height: 18.004px; min-height: 0px; white-space: nowrap; color: rgb(33, 33, 33); font-family: Menlo, Monaco, Consolas, "Courier New", monospace, Menlo, Monaco, Consolas, "Courier New", monospace; font-size: 14px;  }
.S4 { color: rgb(33, 33, 33); padding: 10px 0px 6px 17px; background: rgb(255, 255, 255) none repeat scroll 0% 0% / auto padding-box border-box; font-family: Menlo, Monaco, Consolas, "Courier New", monospace; font-size: 14px; overflow-x: hidden; line-height: 17.234px;  }
/* Styling that is common to warnings and errors is in diagnosticOutput.css */.embeddedOutputsErrorElement {    min-height: 18px;    max-height: 550px;}
.embeddedOutputsErrorElement .diagnosticMessage-errorType {    overflow: auto;}
.embeddedOutputsErrorElement.activeOutput .eoOutputContent {    user-select: text;    -webkit-user-select: text;}
.embeddedOutputsErrorElement.activeOutput .eoOutputContent button {    user-select: none;    -webkit-user-select: none;}
.embeddedOutputsErrorElement .eoOutputContent ::selection {}
.embeddedOutputsErrorElement.inlineElement {}
.embeddedOutputsErrorElement.rightPaneElement {}
/* Styling that is common to warnings and errors is in diagnosticOutput.css */.embeddedOutputsWarningElement {    min-height: 18px;    max-height: 550px;}
.embeddedOutputsWarningElement .diagnosticMessage-warningType {    overflow: auto;}
.embeddedOutputsWarningElement.activeOutput .eoOutputContent {    user-select: text;    -webkit-user-select: text;}
.embeddedOutputsWarningElement .eoOutputContent ::selection {}
.embeddedOutputsWarningElement.inlineElement {}
.embeddedOutputsWarningElement.rightPaneElement {}
/* Copyright 2015-2023 The MathWorks, Inc. *//* In this file, styles are not scoped to rtcContainer since they could be in the Dojo Tooltip */.diagnosticMessage-wrapper {    font-family: Menlo, Monaco, Consolas, "Courier New", monospace;    font-size: 12px;}
.diagnosticMessage-wrapper.diagnosticMessage-warningType {    /*This fallback value will be used for appdesigner warnings*/    color: var(--rtc-warning-output-color, var(--mw-color-matlabWarning));}
.diagnosticMessage-wrapper.diagnosticMessage-warningType a {    /*This fallback value will be used for appdesigner warnings*/    color: var(--rtc-warning-output-color, var(--mw-color-matlabWarning));    text-decoration: underline;}
.rtcThemeDefaultOverride .diagnosticMessage-wrapper.diagnosticMessage-warningType,.rtcThemeDefaultOverride .diagnosticMessage-wrapper.diagnosticMessage-warningType a {    color: var(--mw-color-matlabWarning) !important;}
.diagnosticMessage-wrapper.diagnosticMessage-errorType {    /*This fallback value will be used in appdesigner error tooltip text*/    color: var(--rtc-error-output-color, var(--mw-color-matlabErrors));}
.diagnosticMessage-wrapper.diagnosticMessage-errorType a {    /*This fallback value will be used in appdesigner error tooltip text*/    color: var(--rtc-error-output-color, var(--mw-color-matlabErrors));    text-decoration: underline;}
.rtcThemeDefaultOverride .diagnosticMessage-wrapper.diagnosticMessage-errorType,.rtcThemeDefaultOverride .diagnosticMessage-wrapper.diagnosticMessage-errorType a {    color: var(--mw-color-matlabErrors) !important;}
.diagnosticMessage-wrapper .diagnosticMessage-messagePart,.diagnosticMessage-wrapper .diagnosticMessage-causePart {    white-space: pre-wrap;}
.diagnosticMessage-wrapper .diagnosticMessage-stackPart {    white-space: pre;}
.embeddedOutputsTextElement,.embeddedOutputsVariableStringElement {    white-space: pre;    word-wrap:  initial;    min-height: 18px;    max-height: 550px;}
.embeddedOutputsTextElement .textElement,.embeddedOutputsVariableStringElement .textElement {    overflow: auto;}
.embeddedOutputsTextElement.activeOutput .eoOutputContent,.embeddedOutputsVariableStringElement.activeOutput .eoOutputContent {    user-select: text;    -webkit-user-select: text;}
/*embeddedOutputsTextElement has a different dom structure than embeddedOutputsVariableStringElement.Unlike variableString, the text output has both TEXT nodes and elements as children. Hence we needa selector for each.*/.embeddedOutputsTextElement .eoOutputContent::selection,.embeddedOutputsTextElement .eoOutputContent ::selection,.embeddedOutputsVariableStringElement .eoOutputContent ::selection {}
.textElement,.rtcDataTipElement .textElement {    padding-top: 2px;}
.embeddedOutputsTextElement.inlineElement,.embeddedOutputsVariableStringElement.inlineElement {}
.inlineElement .textElement {}
.embeddedOutputsTextElement.rightPaneElement,.embeddedOutputsVariableStringElement.rightPaneElement {    min-height: 16px;}
.rightPaneElement .textElement {    padding-top: 2px;    padding-left: 9px;}
.S5 { border-left: 1px solid rgb(217, 217, 217); border-right: 1px solid rgb(217, 217, 217); border-top: 1px solid rgb(217, 217, 217); border-bottom: 1px solid rgb(217, 217, 217); border-radius: 0px 0px 4px 4px; padding: 6px 45px 4px 13px; line-height: 18.004px; min-height: 0px; white-space: nowrap; color: rgb(33, 33, 33); font-family: Menlo, Monaco, Consolas, "Courier New", monospace, Menlo, Monaco, Consolas, "Courier New", monospace; font-size: 14px;  }
.S6 { margin: 20px 10px 5px 4px; padding: 0px; line-height: 25px; min-height: 0px; white-space: pre-wrap; color: rgb(33, 33, 33); font-family: Helvetica, Arial, sans-serif, Helvetica, Arial, sans-serif; font-style: normal; font-size: 20px; font-weight: 700; text-align: left;  }
.S7 { border-left: 1px solid rgb(217, 217, 217); border-right: 1px solid rgb(217, 217, 217); border-top: 0px none rgb(33, 33, 33); border-bottom: 1px solid rgb(217, 217, 217); border-radius: 0px 0px 4px 4px; padding: 0px 45px 4px 13px; line-height: 18.004px; min-height: 0px; white-space: nowrap; color: rgb(33, 33, 33); font-family: Menlo, Monaco, Consolas, "Courier New", monospace, Menlo, Monaco, Consolas, "Courier New", monospace; font-size: 14px;  }
.S8 { margin: 10px 10px 9px 4px; padding: 0px; line-height: 21px; min-height: 0px; white-space: pre-wrap; color: rgb(33, 33, 33); font-family: Helvetica, Arial, sans-serif, Helvetica, Arial, sans-serif; font-style: normal; font-size: 14px; font-weight: 400; text-align: left;  }
.S9 { border-left: 1px solid rgb(217, 217, 217); border-right: 1px solid rgb(217, 217, 217); border-top: 1px solid rgb(217, 217, 217); border-bottom: 0px none rgb(33, 33, 33); border-radius: 0px; padding: 6px 45px 0px 13px; line-height: 18.004px; min-height: 0px; white-space: nowrap; color: rgb(33, 33, 33); font-family: Menlo, Monaco, Consolas, "Courier New", monospace, Menlo, Monaco, Consolas, "Courier New", monospace; font-size: 14px;  }
.S10 { margin: 3px 10px 5px 4px; padding: 0px; line-height: 25px; min-height: 0px; white-space: pre-wrap; color: rgb(33, 33, 33); font-family: Helvetica, Arial, sans-serif, Helvetica, Arial, sans-serif; font-style: normal; font-size: 20px; font-weight: 700; text-align: left;  }
.S11 { border-left: 1px solid rgb(217, 217, 217); border-right: 1px solid rgb(217, 217, 217); border-top: 1px solid rgb(217, 217, 217); border-bottom: 1px solid rgb(217, 217, 217); border-radius: 4px 4px 0px 0px; padding: 6px 45px 4px 13px; line-height: 18.004px; min-height: 0px; white-space: nowrap; color: rgb(33, 33, 33); font-family: Menlo, Monaco, Consolas, "Courier New", monospace, Menlo, Monaco, Consolas, "Courier New", monospace; font-size: 14px;  }
.embeddedOutputsVariableTableElement .ClientViewDiv  table tr {  height: 22px;  white-space: nowrap;}
.embeddedOutputsVariableTableElement .ClientViewDiv  table tr td,.embeddedOutputsVariableTableElement .ClientViewDiv  table tr th {  background-color:white;  text-overflow: ellipsis;  font-family: 'Arial', sans-serif;  font-size: 12px;  overflow : hidden;}
.embeddedOutputsVariableTableElement .ClientViewDiv  table tr span {  text-overflow: ellipsis;  padding: 3px;}
.embeddedOutputsVariableTableElement .ClientViewDiv  table tr th {    color: rgba(0,0,0,0.5);  padding: 3px;  font-size: 9px;}
/* ClientDocument has a summary bar child that takes up 17px, this clashes with overflow on the view which allots space for scrollbars. On print preview, this causes headers from <thead> to overlap on subsequent pages. Displaying Document as flex renders summarybar and view in column format and fixes the issue g2788485 */.embeddedOutputsVariableTableElement .ClientDocument {  display: flex;  flex-direction: column;}
.S12 { border-left: 1px solid rgb(217, 217, 217); border-right: 1px solid rgb(217, 217, 217); border-top: 0px none rgb(33, 33, 33); border-bottom: 0px none rgb(33, 33, 33); border-radius: 0px; padding: 0px 45px 0px 13px; line-height: 18.004px; min-height: 0px; white-space: nowrap; color: rgb(33, 33, 33); font-family: Menlo, Monaco, Consolas, "Courier New", monospace, Menlo, Monaco, Consolas, "Courier New", monospace; font-size: 14px;  }</style></head><body><div class = rtcContent><h1  class = 'S0'><span style=' font-weight: bold; text-decoration: underline;'>Nutrition Algorithm Walkthrough</span></h1><div  class = 'S1'><span style=' font-weight: bold;'>Authors: Bronson R. Weston and Bram Nap, University of Galway.</span></div><div class="CodeBlock"><div class="inlineWrapper"><div  class = 'S2'><span style="white-space: pre"><span style="color: rgb(0, 128, 19);">%initCobraToolbox() </span></span></div></div><div class="inlineWrapper outputs"><div  class = 'S3'><span style="white-space: pre"><span >changeCobraSolver(</span><span style="color: rgb(167, 9, 245);">'ibm_cplex'</span><span >) </span><span style="color: rgb(0, 128, 19);">% change solver if necessary</span></span></div><div  class = 'S4'><div class="inlineElement eoOutputWrapper disableDefaultGestureHandling embeddedOutputsTextElement scrollableOutput" uid="F0BE1FD5" prevent-scroll="true" data-testid="output_0" tabindex="-1" style="width: 1145px; white-space: pre; font-style: normal; color: rgb(33, 33, 33); font-size: 12px;"><div class="textElement eoOutputContent scrollArea" tabindex="-1" data-previous-available-width="1108" data-previous-scroll-height="1464" data-hashorizontaloverflow="false" role="article" aria-roledescription="Use Browse Mode to explore " aria-description="text output " style="max-height: 261px; white-space: pre; font-style: normal; color: rgb(33, 33, 33); font-size: 12px;">CPXPARAM_Output_WriteLevel                       3
CPXPARAM_Output_CloneLog                         -1
Found incumbent of value 0.000000 after 0.00 sec. (0.00 ticks)

Root node processing (before b&amp;c):
  Real time             =    0.00 sec. (0.00 ticks)
Parallel b&amp;c, 16 threads:
  Real time             =    0.00 sec. (0.00 ticks)
  Sync time (average)   =    0.00 sec.
  Wait time (average)   =    0.00 sec.
                          ------------
Total (root+branch&amp;cut) =    0.00 sec. (0.00 ticks)
Could not find installation of tomlab_cplex, so it cannot be tested
Original LP has 1 row, 2 columns, 1 non-zero
Objective value = 0
OPTIMAL SOLUTION FOUND BY LP PRESOLVER

 &gt; [glpk] Primal optimality condition in solveCobraLP satisfied.Could not find installation of mosek, so it cannot be tested

   --------------------------------------------------------
   pdco.m                      Version pdco5 of 15 Jun 2018
   Primal-dual barrier method to minimize a convex function
   subject to linear constraints Ax + r = b,  bl &lt;= x &lt;= bu
                                                           
   Michael Saunders       SOL and ICME, Stanford University
   Contributors:     Byunggyoo Kim (SOL), Chris Maes (ICME)
                     Santiago Akle (ICME), Matt Zahr (ICME)
                     Aekaansh Verma (ME)                   
   --------------------------------------------------------

The objective is linear
The matrix A is an explicit sparse matrix

m        =        1     n        =        2      nnz(A)  =        1
max |b | =        0     max |x0| =  1.0e+00      xsize   =  1.0e+00
max |y0| =        1     max |z0| =  1.0e+00      zsize   =  1.0e+00

x0min    =        1     featol   =  1.0e-06      d1max   =  1.0e-04
z0min    =        1     opttol   =  1.0e-06      d2max   =  5.0e-04
mu0      =  1.0e-01     steptol  =     0.99     bigcenter=     1000

LSMR/MINRES:
atol1    =  1.0e-10     atol2    =  1.0e-15      btol    =  0.0e+00
conlim   =  1.0e+12     itnlim   =       10      show    =        0

Method   =        2     (1 or 11=chol  2 or 12=QR  3 or 13=LSMR  4 or 14=MINRES 21=SQD(LU)  22=SQD(MA57))
Eliminating dy before dx  
 

Bounds:
  [0,inf]  [-inf,0]  Finite bl  Finite bu  Two bnds   Fixed    Free
        0         0          0          0         0       2       0
  [0, bu]  [bl,  0]  excluding fixed variables
        0         0

Itn   mu stepx stepz  Pinf  Dinf  Cinf   Objective    nf  center       QR
  0                   -6.6 -99.0  -Inf  1.2500000e-07        1.0
  1 -1.0 1.000 1.000 -99.0 -99.0  -Inf  0.0000000e+00  1     1.0        1
  2 -3.0 1.000 1.000 -99.0 -99.0  -Inf  0.0000000e+00  1     1.0
  3 -5.0 1.000 1.000 -99.0 -99.0  -Inf  0.0000000e+00  1     1.0
  4 -7.0 1.000 1.000 -99.0 -99.0  -Inf  0.0000000e+00  1     1.0
   Converged

max |x| =     0.000    max |y| =     0.000    max |z| =     0.000   scaled
max |x| =     0.000    max |y| =     0.000    max |z| =     0.000 unscaled
max |x| and max |z| exclude fixed variables
PDitns  =         4     QRitns =         0    cputime =       0.3

Distribution of vector     x         z
[      1,     10 )         0         2
[    0.1,      1 )         0         0
[   0.01,    0.1 )         0         0
[  0.001,   0.01 )         0         0
[ 0.0001,  0.001 )         0         0
[  1e-05, 0.0001 )         0         0
[  1e-06,  1e-05 )         0         0
[  1e-07,  1e-06 )         0         0
[  1e-08,  1e-07 )         0         0
[      0,  1e-08 )         2         0 
Elapsed time is 0.272940 seconds.

 &gt; [pdco] Primal optimality condition in solveCobraLP satisfied.
 &gt; [pdco] Dual optimality condition in solveCobraLP satisfied.
Could not find installation of quadMinos, so it cannot be tested
Could not find installation of dqqMinos, so it cannot be tested
Could not find installation of cplex_direct, so it cannot be tested

 &gt; [cplexlp] Primal optimality condition in solveCobraLP satisfied.
 &gt; [cplexlp] Dual optimality condition in solveCobraLP satisfied.
Could not find installation of tomlab_snopt, so it cannot be tested
removing: C:\Users\brons\BronsonFork\fork-cobratoolbox\src\analysis\thermo\componentContribution\new
removing: C:\Users\brons\BronsonFork\fork-cobratoolbox\src\analysis\thermo\groupContribution\new
removing: C:\Users\brons\BronsonFork\fork-cobratoolbox\src\analysis\thermo\inchi\new
removing: C:\Users\brons\BronsonFork\fork-cobratoolbox\src\analysis\thermo\molFiles\new
removing: C:\Users\brons\BronsonFork\fork-cobratoolbox\src\analysis\thermo\protons\new
removing: C:\Users\brons\BronsonFork\fork-cobratoolbox\src\analysis\thermo\trainingModel\new

 &gt; changeCobraSolver: IBM ILOG CPLEX interface added to MATLAB path.
 &gt; isCompatible: The solver compatibility cannot be verified with MATLAB R2019b.</div></div><div class="inlineElement eoOutputWrapper disableDefaultGestureHandling embeddedOutputsVariableStringElement" uid="6F8AD227" prevent-scroll="true" data-testid="output_1" tabindex="-1" style="width: 1145px; white-space: pre; font-style: normal; color: rgb(33, 33, 33); font-size: 12px;"><div class="textElement eoOutputContent" tabindex="-1" data-previous-available-width="1108" data-previous-scroll-height="35" data-hashorizontaloverflow="false" style="max-height: 261px; white-space: pre; font-style: normal; color: rgb(33, 33, 33); font-size: 12px;" role="article" aria-roledescription="Use Browse Mode to explore " aria-description="variable output "><div style="white-space: pre; font-style: normal; color: rgb(33, 33, 33); font-size: 12px;"><span class="variableNameElement" style="white-space: pre; font-style: normal; color: rgb(33, 33, 33); font-size: 12px;">ans = <span class="headerElement" style="white-space: pre; font-style: normal; color: rgb(33, 33, 33); font-size: 12px;">logical</span></span></div><div style="white-space: pre; font-style: normal; color: rgb(33, 33, 33); font-size: 12px;">   1
</div></div></div></div></div><div class="inlineWrapper"><div  class = 'S5'><span style="white-space: pre"><span >clear </span><span style="color: rgb(167, 9, 245);">options</span></span></div></div></div><h2  class = 'S6'><span style=' text-decoration: underline;'>Background:</span></h2><div  class = 'S1'><span>The nutrition algorithm seeks to identify the minimal changes to a diet/feed/medium to achieve the largest shift in flux for one or more reactions of interest (ROIs). The algorithm produces points when adding or removing nutrients from the diet/feed/medium. It also produces or consumes points when minimizing or maximizing ROI fluxes, respectively. Overall, the goal of the algorithm is to minimize the total points accumulated (</span><span style=' font-style: italic;'>p</span><span>), such that:</span></div><div  class = 'S1'><span mathmlencoding="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mrow&gt;&lt;mi&gt;p&lt;/mi&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;msup&gt;&lt;mrow&gt;&lt;mi&gt;w&lt;/mi&gt;&lt;/mrow&gt;&lt;mrow&gt;&lt;mi mathvariant=&quot;normal&quot;&gt;a&lt;/mi&gt;&lt;/mrow&gt;&lt;/msup&gt;&lt;msup&gt;&lt;mrow&gt;&lt;mtext&gt; &lt;/mtext&gt;&lt;mi mathvariant=&quot;italic&quot;&gt;v&lt;/mi&gt;&lt;/mrow&gt;&lt;mrow&gt;&lt;mi mathvariant=&quot;normal&quot;&gt;a&lt;/mi&gt;&lt;/mrow&gt;&lt;/msup&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;msup&gt;&lt;mrow&gt;&lt;mi&gt;w&lt;/mi&gt;&lt;/mrow&gt;&lt;mrow&gt;&lt;mi mathvariant=&quot;normal&quot;&gt;r&lt;/mi&gt;&lt;/mrow&gt;&lt;/msup&gt;&lt;msup&gt;&lt;mrow&gt;&lt;mi&gt;v&lt;/mi&gt;&lt;/mrow&gt;&lt;mrow&gt;&lt;mi mathvariant=&quot;normal&quot;&gt;r&lt;/mi&gt;&lt;/mrow&gt;&lt;/msup&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mrow&gt;&lt;mo&gt;(&lt;/mo&gt;&lt;mrow&gt;&lt;mi mathvariant=&quot;italic&quot;&gt;m&lt;/mi&gt;&lt;msup&gt;&lt;mrow&gt;&lt;mtext&gt; &lt;/mtext&gt;&lt;mo&gt;⊙&lt;/mo&gt;&lt;mi mathvariant=&quot;italic&quot;&gt;w&lt;/mi&gt;&lt;/mrow&gt;&lt;mrow&gt;&lt;mi mathvariant=&quot;normal&quot;&gt;roi&lt;/mi&gt;&lt;/mrow&gt;&lt;/msup&gt;&lt;/mrow&gt;&lt;mo&gt;)&lt;/mo&gt;&lt;/mrow&gt;&lt;msup&gt;&lt;mrow&gt;&lt;mi&gt;v&lt;/mi&gt;&lt;/mrow&gt;&lt;mrow&gt;&lt;mi mathvariant=&quot;normal&quot;&gt;roi&lt;/mi&gt;&lt;/mrow&gt;&lt;/msup&gt;&lt;mo&gt;.&lt;/mo&gt;&lt;/mrow&gt;&lt;/math&gt;" style="vertical-align:-5px"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAZYAAAAoCAYAAADdT9wnAAAAAXNSR0IArs4c6QAAGuVJREFUeF7tXQuUHEXVrts9s5s3EhLBze50VYiiCIgIAgISFRQEAVEUEBB5KaAIgsAPKoI8VBREFPABiID8CgoqT5EffL/Bt6gxVT27iQQCmk3YNTPTdf/+5nTv6R1ndmd2ejYT0nVOzoGd6np8XV237r3fvUUiKxkCGQIZAhkCGQIpIkAptpU1lSGQIZAhkCGQISAywZItggyBDIEMgQyBVBHIBEuqcGaNZQhkCGQIZAhkgiVbAxkCGQIZAhkCqSKQCZZU4cwayxDIEMgQGI/AwoUL5zz11FPrNjZclixZ0rts2bJACFFpdeyZYGkVsax+hkCGQIZAkwhIKU8WQlzNzIf5vn9nk491Q7UepdQyZl5tjNmp1QFlgqVVxLL6GQIZAhkCTSIgpXy7EOJKIcSRxphHmnysG6q5SqmfMfM/jTEHtzqgTLC0ilhWP0MgQyBDIENgQgQywZItkAyBDIEMgQyBVBHIBEubcCqlDmLmI4loUAjxSmbW1tozisXiv9psutHjpJQ6UwjxMiHEv9GnEOK7WuvLhBBwtD1ni+d5uxPRsUKIZ621tzqOcysRuUEQvHIqePf398/P5XJvE0KcWCqVDunp6TkL7VtrL/J9/9PPWSCziU2KwMDAwNau6x4jhNirUqm8NZ/Pfx3fHHwlxpgfSClnENGHmHkOEc0XQkhm/rEQ4iJjzH+SHQwMDGznuu5sY8wvJu24/Qo9Uso3hvvR8cyM76NHCPFpZv6hMeYtaD76jk4kIuxR2zNzwMxY8z9Ldr/lllvOnjlz5puMMf/b6rAywdIqYon6hUJhH8dxHmDmfX3f/79osfnM/LAx5vA2mm74qOd5FxHRWaOjowtXrVr1rOd5L3cc51FmPtkYc10n+uyGNj3Pew0RnU5EB0GQMvNKIpoFoc7M2/u+/5dWxtnX1zerp6fnNCHEOUT0PGvt5Y7jrGXm9wghfmCMObKV9rK6zx0EIqFyKhGdgYOiEOLb4ToZJaIPMPNpzz777Ndmz54NIfF1Y8xFmHn0zI+IaHW5XN51aGho1PO8d+AZItqJmT9qjLmw0ygppY5h5rOJ6KVCiC+H431GCLE3hmiMWaSUOiE8gH64UqnsPjg4uBLjkVJ+QghxJhEdp7X+qpRSEtGZzHwcvjGtdctyouUHOg3MxtS+53nnOY5zibX2Fb7vPxq9pIdxsjHG4BSTelFKfU8IsavW+nlCCA5PSI6UsozFb4w5NPUOu6jBQqHwCtd1fy2E+KPWekdoaO1SOZVS3xVCHCiEeLvW+hv9/f0zh4aGShuD9lcoFI4iIvZ9/9Yuek3PmaEopYaFEDNKpdLiFStWDMVrTUp5BTZhZt4qqZ1IKXHwuZKZLzPGnBdpB8c5jnN9UrAUCoWXOo5zvDHm7KlQeScD2PO8Mx3H+RQzX2uMOQV7RF9f3wzHcTbP5/N/YeZLjTEfj9uJDsQmHHfv6OjoNqtWrXoSz4RCajkUnEywTIZ4yr9jEyKi7QYHB3+FppVSHjPfI4TY2hgzM+Xuqs1JKbdyHGfe8uXL/xb1CfMbVNjvhar2/p3os1vaVEptI4R4PDx9Xa+1xsmr7SKlvI2IDi+VSgPYPNpucBoawEYghLiKiJ7SWn9oGrrcJLuQUv4TZldjzJIkAEopbLy+1nqX5N/nz58/b7PNNlsDLccYsxi/warhuu6DtRqL53n7E9H7RkdHj4028tQwDsf9biK6LgiCo4vF4i1xw57nneI4zuettQf6vo99aqwopWD6/YAQ4p3QWqK9Baa9PTLBktqraa0hpdSrhRCwxxohxMHMvF2nBEs0Mpwmjgrtpq9lZqjfXwgXwIObkGD5stb6xNbeUv3asWApl8v9Q0NDK9Jos5NtYPOaN28eaKuwmZ/eyb429bYhWEKz8zqt9QtjLPr6+hb09vY+JYT4ldYa/s1xRSn1BDM/f3R0dC5M1YVC4XWu636/ninM87wDiOhz1trXFYtFaAeplFiwWGuPSmqzSqnPCyFOsdYe4Pv+vcnOpJTvIaJrYRL2fR+aFA7KPxJC7JkJllReS0uN5EIt5UZmnj08PHzsM888M6yUwulkz04JFmgsoSnsvlB43eH7Phz2VilVDvv8fhqCJVp8+GBO0Fr/riU0Olw5obF0tWDxPA/mj5Ottdf6vn9DirCQlPIuIurTWu+Kd59i251uyvU872AigtlxNyEE1jG0+ieghRLRvSMjI19P+/TezqTqCRYp5fPg9A59cU8YY15Q276U8jFYMbTWs4QQ5YkEC56VUl5GRPtorfcQQsAE23ZpJFiklFfCTwk/Yjh2HEbHSjhuvJu7mPlCY8xHM8HS9muYegOe533ScZzTRkZGtsDpJHoZHRUsSqlfCiHWa633ikeesmB5UAixTxAEexaLxZ9MHZ30n9yIBMv5juNcbK39kO/7l6SFhFIKLCQ4i19ljPl5Wu12uh3P897iOA5s+uNMSrX9MjO+oatzudxHly1btr7T45qs/XqCJfrGB5l50ejo6Fa1glAphd/WGmO2Rd3JBEtkPvsHM99ijDljsjE183sjweJ53vGO43xZCPF5rfV7k20lfqv6GjPB0gzSHaqjlPKFEPNd110QfwhSyt+CkaG1hh08Vfqv53nKcRyozA9qrV8fLdzNXdd9hpkfCWmQr2l3qtC4MsHSHoqe56UuWAYGBnZ2XfcXRHSb1vqo9kY4bU/DZPtZIcSpUY9/t9ZeBdbk+vXr/VWrVpUWLVq0peu6uzmOAyJCNcKbmR8rlUoHr1y5EhT+DVYaCRYp5UeICAyvD2utL44HuGjRov58Pu9DK9BaXx19n7GPZUwTqJ2QUup94T4CnN6gtQY5p63SSLCAXp/P5/8qhMivW7euP5m/zPO8LzqOs//IyMiLE4fkzvtYkJCsUqmoUqk0snLlyiJmDrOMtXYJwv4HBwex4YGl1LUlmsNLwNoiorla68/VG2yhUFjsOE5PSBmGo3isRCevF6xfv/6GlStXjiil4ECH/fUaa+3djuO8UQixVAixXYgJHGiPa61/2AgQ8MRnzJixg+M4O4fUvqIxBrTGZHGllGfBXGCMuSlauEUiCqy1sK8/QUQHwK8TfZAnBkHw+6GhoWVTfQlpCpYO4I3Ynd8yM2ietXRumIlAntjJcRzQOy+uE0+wSy6XOyQ8bX7JhPp+tIbvJCL87SW173uqGHZCsCil4FA9OgiCNxWLxbsnGBt5nidDliBo6Ln49In6AwMDe7mu+yrENNTGLCildhBCgMq9SmsN813bhyIp5TVEdHKkiVxijIGDuKG5Rym1LzNfHQrPbZj58UqlssfQ0BDoss0Up7+/H7En2wshdszn85fU03pAuHFdd3eEByQbBeOQiPYLguArsa9NSvkMEZW01jDbjRWs6yAI4H/wgiDYPfaPKKW+xMyLjTE49FXxi01MQohPaa0/WG8iUTzVaiJ6SGu9b7JOq3tE1Of7Qwr9Z+qFICDFDBHdDPJHPB7P817iOM4j1trjkk79yKy348jIyJxY2DTzIlBnQrpxf3//klwuh40NkwW32bHWQq39TZRY7cBQcsdtgBl1mNYap/iuKzjtExGCgmDjxeKDOWku7KA1gwV99yfYfGrs49i41kWxE+eGPpRPQM11HAe2yi2EEL9k5v8hooVE9FVmXlYqlQ5vdOqKWCHA9Vgi2ryexiGl3DVc7FWTR/j7UgRmeZ4HXjyojDAVPEhE51hrT0BsixDiO7lc7qR2zAhpCZa08RZC4LQOBtTrQp7+SLh2L2Tm233f17B7M/OpjuOAr1/9MGO8ku82xPM+bB7Aet26dQfNnj37NCLCO5sNLK21X/B9/5vtLt60BcuiRYu2yOfzYKz1OI4zf/ny5Wtqxxj53hCPgG8yprp/RGv9sQULFsydM2fOF4joiPg5a+22UewPckJV4xgSbR6jtcbmM+USbWAIrKtYa/f2ff+nzTSG+KLe3l7EiGwX/rtDa31YE8/1eJ73wXBj3ouI3oD6lUrl1YODg9j8xxXEbIRklxdorUG2GSuJtXF/pVI5LZfLIa7j3VEFMKlurRHGSNL4YfhTiWiZtRZxLkOR8KwKFaXU25gZFOTdmXkFtJxGQjvEC3FY21QqlW2Ghob+juenskcIIcBGOz8UHlsLIZBE8vLR0dFbk4JBKQUm6QVEZJn5z1gvQRBcWSwW/4x+se+7rvu2MPj4Y9jzmRkHjauNMb9t4l1UqzQVxxLzs7EJIxgwPDED0MuHh4d/Nnfu3J2J6LvRhnuvMQYn6EnL4sWLN7PWwnHXViEiOHKhSjZVFi9e/CJmhjoogiB4aQxm/HCsllprz/d9/9JkozE/HBqK1jpW75vqt1Elz/OORAR5SPUbTsSmxNXzUsoHiAgmrrO11pe31VkTD6clWOKuphlvZCWAlvkia+1ZtdHzUsr9sFaZuWSMgTDpSElbsCilcGi4nJl/Y4zZeaJBK6XehANGVGdXZv69EOIeZv5WpVL5Nkwh0bf6LmjBSqmbQu0XGRwucxznfiEENJd26dzYdP+BPcpae6bv+1e0ArSU8sWhgPw1BH4jAdGgPRz+BolokbX2VN/3r6n5fqHFwUf5cGxKjn8vFAp7uK77EDP/wxiD4MJpLVLK6xEbgyh5rTXe91jptj2iGWCaFSyI5MSp5o+h2eWxMOr5pKSZQSkFZ89hzGxzudysZk7MECyhNMeCbquEQUrXGWOQmrrpopQCXXBBEASHFYvFO+IH+/r6Cj09Pb9DJDYzf9YY8/7aRnGyCIPSLkiaGJruuE7FSMD+C5pfuVx+Ya0Za2BgoC+Xy62w1r7W930EX3a0pC1YMNjpxDsKXoMT9NZ6vojIlryN1hraTUdKBwTL7eG399YGJsBxc0C0t+M4tyDi2hizJViL1tobYfqJTDhrYWOvVCqvzOVy0N4gZPFt4z3hpAzT9nnGGDAOp1QKhcKBrusi8LQuJbeZRhPC9EZjDDbcpopSqopVHQd1NVtvKGQRe/J7rTXMquOKlPJaKLtRUGFT/aVVKTHfv4YpVCBYx0q37RHNzLlZwRKbEP5dLpeXrFix4ulk41JKBGshPQaK7FZzWDxmpdQPhBCIPRmnBWBRMjNOPEjl8A1jDFJej5Xow8THglNjKtTAKmBSLotU14O01vggxwrs4rlc7gatNYIDO04v7ZBgmTa8EY3uuu7NzPyoMeYVdTaPh4joK+2aeib6uDogWHDK3sVae7Xv+/F3VncIoVnwMyEd9v3MDDPUz621T8dBcsgR5TjOT3GgCzWZQ4kIea8QmQ2hsmVE/YUZaZfBwUFkOJhSUUrBd3lqI20lMu1B++4LO0Cqk/9iuPX39y+C+S9K2456TZUwG8mFoYnnI8w8znqilIJ/YzOYicJYjie11pjvuAJzGDN/oNX0QE0NbJJKscM9MtGDqjzuW++mPaKZ+TYjWJDUDE6s2UmOc7Lx0Gl6Y5QcELbtmbVO02YGMp11EuMdM2lJKY+INnc45JFw7oe1p9rIFIZo52pkalpFSnk/bMMNzDc3MfNdaV0SpJSCSWUc1bBmHj2wq0JwQgNtNEcEFNYeMBrVnU68Qyx3C7HEyRSBbfChjZX+/v4X5nK524wxiNOZspCGuQkHj0bzJaKcEAL/Kszc8PY95Dlr5r0qpVaF5tfnM/MnjTHnTLTupJS/QW6q0B9zKTNvnjx9J0y5MAfCD3BE/K3CH4B1H2k6C9vEB6Y4YLS/MQbmtdoN/LrYf9EoHgQPIKUKkjzmcrmZzVhB8IyU8p04OMB3EJu0kMcrl8t9BrFZEJ6hfwFaCZIzjr2biHWHfHvHp/Vdt9JOwtwl6mWBmM49opVxN/wGJmtESrmUiKommCAItq4XISql/CkcVOFlNn+LTtaTNbtBf5dSXgqnbewcjE5Qd+dyuaVBECDwDCfscXOBmay3txf8bzCwprwp1Zt46HitfmjM/EVjTOwwxEcClfgaY8xr0wIsDpJqt71SqbSgBcEybXjDiR1iiVQcwlrb5/t+9b+jjeoWa+0NtYygVrFIMH1afXRcfWvtWycjC0Racpwt91KtNU7cdUtkMsEhEAeDH69Zs+YABO0m5h9v+IaIEK8ATahaEgyu/9LUW51klM9u30bmW6UUzM/VTLvMPBo6vHEA+C8WWpQ6ZeHatWvnrV69Gia8SYtSCoysB4QQq7XWEJCY233QnorF4uNKKZBecjVrIyelhLAFK2psvUzaWYoVkCU9SnaJVveuZZNO5x6RxrQm1VgSm/Avo2jfcf2CcTJ37lyYxvLJ5GtpDK5TbUgpzyCiK5gZWWyXSinhwLwdNE6cavP5PLQWONOhOqOAKYaF916wkNIeF9glSLcthLhbaw3na9zn3WA7daLPRnPohClsmvFG7ER18wiCYOdisQgGIzYX+BPeOJkpKY13m7YpTEo5Evo4ZzLzlcYY5HOqWzzPO9RxnCqrjZnhnP9KoiLW8NPwH4a57G6uw4oCOwhU/BO11giim3LB90REYF3VZZdFyURvC6nFWxDRuVrrL9V2FlHVR0Nz9YgxZk6zg0lk+7bGGJBfoMEgrqzqEJdSgp3VZ63dyff9x/A3pdQlQRA8lvS3NttfWvWShxVm3q02xX437RHNzHlSwaKUAo1453osKXQQJzbDyaNcLr+o2UR+G4oVFi2ko0NaHijB+JjgTzndGIMYFBEJyuopr1wuz0L6a9htEWfi+/71zYDaap0olTU48L8ITQdId4EP4NwwIRyS2cEsN22lE4IlZAhNK95SyiEwg2JTDDTSnp6em1zXfUuzJpV2AO+AYAFhBNrrhGytiJhwIq4UCIUKYlnGqPQDAwOI4alqKOVyeYehoaE/xHNM+lfS8JEmDhItOd6TmEcMvvtC+vhPtNZ7Nvs++vr6Bnp7e6txdpVKZXvXdW8fHh7eNdbcYlNhvDaikIGjw7gm3POzwUrsG4wGsJXWGubPsdJNe0QzIE0oWCIT0ZMRl/nltTxmBBvlcrk/EZFCqgljzAXNdIo6G5IVFi9aODGRITYIgkOStOMoXgU+JcxrW8dxDq894TU7z2bqeZ73ZsdxvgUaNBgh0enl9WlRmpsZQ2KTST3yfrrxVkohx9kOIZ5H5HK5OyuVyp2O45weZ4RuBY+p1O2AYLmXiJC5+natNXwhdYtSChvqQD3LQXzFQz3KcuxfScuUjQBj13VBNx4ul8vbTiW5p5QynnNLNPsoBTw0nWoEf5iTDKzRLybWN4JLD4BGVyqVHurt7b1l7dq1BzZrapvKemjmGSnlyUR0DTP/xxgD5/24YPNu2iOamc+EgiXh0HvaGAN7Ze1kkSsLbAtEjCIwqe1o3WYG3W6dmB0TLb74zoKxZhMMDFya865KpXIANJd2+230vJRybyJ6BAwYZkYA6nlaa9ytUhu82akhJE9GqQuW6cY7xPPhEM+liGUgIpx2v1rPidwpMDsgWHD/BzTrhml7CoXCtq7r/ima0461CURjTBDEm7yLA/Vj/0ocnwXBQEQva4ZYMIGQi/05D4Ssr/1awTpK4gnrwPD69eu3Xrly5epWno9MoXDOj93bkxAsMPPhdkWYnhHceIrWuhrXtiGLlBIXzn2cmf8S5xlLjqeb9giMK7oiBOSQukGTkwkW2D5PCG1+99dmzpVSIqXG1+DodhznkHrRwBvyRU3Ud39///b5fB6BY2tHRkaW1EkkV82RE84ddMe94vQfnZpPwkyBANQfDQ8PvznpdO1Uv/Xa7YQpbLrxllLeQ0QwbT4ZBAGctmN3UkwHlmkLFs/zkKYGviIw3TavdzlUwvyEAL9xyR6RFmTWrFlIjdLTICgY3wKyUbx9dHT04ZkzZ16/Zs2ao9pZg1GaEGgMvcx8hjEGrKxJS5RoFCa7eVMNCo58SfPrsdKUUsjtdT6yNyATgdY6DiaddGydrCClxDXCuLX0Yq01fK7jSjftEZ7n4epjBMUjEwv8ljBZjiuTCRbkU0L+pftiHwScop7nnRbm0kJU+udc1z1/OuzWab7UOJljI79RFGR1sLV2v3YZRM2MO954w/u0/1QqlZa2ekJrpo9m63RCsEw33lLKbxLRocx8ShgkiKC3aS1pCxYMPvYNNIoxiTI0vL6egz9mHEW+l0U1YMDB/Z/I3I2wgYFyuXxyO/nm4vZj3xr+n5m/VqlU3jdB7i/kODsFgdhRaMNd0Y2oLecfjJLD/rU2uh7j8DwPqX8QZ1NNdzOtC2OCzuAXxFUC5XJZ1vNTd9ke8ak4BVAtkzWeYkPBkkzFwcxI1PdslEyuEFIVcb0lEvmNS9LYLS9psnHgitE5c+bcq7Xep16gI+6Vdxzn750MokuOMVIrEdD2ZmNM22luJpv/RL93QrBMN94w7YR01j9sCKESbV6pZzeOL2IKSTLnhDb4TybfYeTrBM14Rj2KLyLKieg9jbIRKKXAPnyVEALMx3PTpNxKKU/CZVYRaxRJU68IguAeZOk2xpQHBgaQ3RimYGTPiK+CuGP9+vXvRKLXqaxl3FlTqVTOqicc4e9D0tZWs3VMZRzNPhPF2SCv17eMMVUadm3ppj0C2igRQcNCMtyTYnZdcswNBUtCsteNUm0WtKzexoWAlBIJ55A07x2+7z+6cY2+O0YLISCEQDqgq4wx16UxKgiPfD6PRKcLRkdHYb6t3v+zMZTIx3ZVlE5lbMgIwI1ibuK/wZeCRI246bBlTWVjwKLeGKOD0LuIaLduu1xvqpg2FCzRTXW4ZrdeivKp9pc9lyGQITBFBKKTIlKtIAIf94FsVAXBi0glE2kmSNPSG139gByE31mzZs032vHrbFRgRINVSr0MTD0koEw7o8eGxKORYMGVuwh6nFfvGssNOeCs7wyBTRkBMKbCNOefrVQqO6bhB9mUseyCucO/9QgRPdpKhvYuGPekQ6grWKLEh9ULqhL3NkzaWFYhQyBDoPMIhJH4Z+Men3K5vFezaXU6P6qshxYRQCaEm8PbJv+ttcalfdMeWtDieFuqXlewxLfVoaVyubxFC7e4tdR5VjlDIENgagh4nvca3ItULpePaTbbxdR6yp5KGwEEcQohcEEgwjhuS7v9bmhvnGCJmAdIO51MN/54eAPcw7WX5nTD4LMxZAhsyghEd/Usmej6600Zn26dO2J1rLXOhkjPP12YTJorbLoGkvWTIZAhkCGQIfDcQCATLM+N95jNIkMgQyBDoGsQ+H+3kj4Zpe15yAAAAABJRU5ErkJggg==" width="203" height="20" /></span></div><div  class = 'S1'><span style=' font-style: italic;'>w^</span><span>a and </span><span style=' font-style: italic;'>v^</span><span>a</span><span style=' font-style: italic;'> </span><span>denote  the weight and the flux of the “Food Added” dietary reactions, respectively. </span><span style=' font-style: italic;'>w^</span><span>r and </span><span style=' font-style: italic;'>v^</span><span>r denote to the weight and the flux of the “Food Removal” reactions, respectively. w^roi and v^roi are the weight and flux for the ROIs. By default,  </span><span style=' font-style: italic;'>w </span><span>and </span><span style=' font-style: italic;'>v</span><span> are vectors of ones, unless manually weighted via the optional struct inputs, as discussed later. Finally, </span><span style=' font-style: italic;'>m </span><span>is a vector defining if an ROI is to be minimized or maximized. Thus, for a given ROI, the corresponding element in </span><span style=' font-style: italic;'>m </span><span>will be equal to -1 or 1 depending on if the goal is to maximize or minimize the ROI, respectively. For the full technical details pertaining to the nutrition algorithm formulation, see Weston and Thiele, 2022 [1].</span></div><div  class = 'S1'><span>The nutrition algorithm is implemented in the </span><span style=' text-decoration: underline;'>nutritionAlgorithm.m</span><span> function in the COBRA Toolbox [2]. The function is highly versatile, allowing the user to customize their solution specifications as they feel fit. In this walkthrough, the different strategies for utilizing the nutrition algorithm will be demonstrated on a genome-scale metabolic reconstruction (GEM) of Atlantic salmon (S</span><span style=' font-style: italic;'>almo solar), </span><span>called SALARECON [3].</span></div><h2  class = 'S6'><span style=' text-decoration: underline;'>Setting up GEM for use:</span></h2><div  class = 'S1'><span>A typical GEM includes a compartment representing extracellular space and a series of exchange reactions that permit flux, both, into and out of the extracellular space. For the nutrition algorithm to run properly two modifications are required to this "typical GEM". First, all reversable exchange reactions must be broken apart into two seperate reactions, each modelling a different direction of flux. Second, all reactions permitting flux of nutrients into the model must be labeled with 'Diet_EX_' at the  beginning of the reaction name to be recognized as dietary reactions (i.e., targeted reactions) by the algorithm. For instance, an exchange reaction for glutamate labelled 'EX_glu[e]' should be labeled 'Diet_EX_glu[e]'. It is also recommended that every dietary reaction has a corresponding "Exit" reaction (i.e., a secretion reaction that allows flux of the nutrient out of the model) and that diet reaction fluxes have a fixed flux (i.e., lb=ub). This option is favored over flexible exchange bounds as it permits the algorithm to analyze and optimize an initial fixed "diet" while maintianing flexible exchange flux by allowing the organism to choose not to uptake certain nutrieints through the exit reactions.</span></div><div  class = 'S1'><span>To convert a typical GEM, as described earleir, into a suitable format for the nutrition algorithm, the user can utilize the function, convert_EX_to_diet, as follows:</span></div><div class="CodeBlock"><div class="inlineWrapper"><div  class = 'S2'><span style="white-space: pre"><span >load(</span><span style="color: rgb(167, 9, 245);">'NAW_salarecon.mat'</span><span >,</span><span style="color: rgb(167, 9, 245);">'model'</span><span >); </span><span style="color: rgb(0, 128, 19);">%initial salmon model has typical EX_ reactions </span></span></div></div><div class="inlineWrapper"><div  class = 'S7'><span style="white-space: pre"><span >mainSalmon= convert_EX_to_diet(model); </span><span style="color: rgb(0, 128, 19);">% convert salmon to model with dietary reactions</span></span></div></div></div><div  class = 'S8'><span>To briefly demonstrate the equivalence of the two models, let's simulate both models optimizing for biomass :</span></div><div class="CodeBlock"><div class="inlineWrapper"><div  class = 'S2'><span style="white-space: pre"><span >sln1=optimizeCbModel(model); </span><span style="color: rgb(0, 128, 19);">%Optimize "typical" GEM with exchange reactions</span></span></div></div><div class="inlineWrapper outputs"><div  class = 'S3'><span style="white-space: pre"><span >sln1.f</span></span></div><div  class = 'S4'><div class='variableElement' style='font-family: Menlo, Monaco, Consolas, "Courier New", monospace; font-size: 12px; '>ans = 1.6135</div></div></div><div class="inlineWrapper"><div  class = 'S9'><span style="white-space: pre"><span >sln2=optimizeCbModel(mainSalmon); </span><span style="color: rgb(0, 128, 19);">%Optimize diet-based model</span></span></div></div><div class="inlineWrapper outputs"><div  class = 'S3'><span style="white-space: pre"><span >sln2.f</span></span></div><div  class = 'S4'><div class='variableElement' style='font-family: Menlo, Monaco, Consolas, "Courier New", monospace; font-size: 12px; '>ans = 1.6135</div></div></div></div><h2  class = 'S10'><span style=' text-decoration: underline;'>nutritionAlgorithm.m Inputs and Outputs:</span></h2><div  class = 'S1'><span>The nutritionAlgorithm.m function takes four inputs. (1) the GEM (model), (2) a cell array containing the ROIS (or a string is acceptible if using only one ROI), (3) a cell array containing the minimization and maximization goals for each reaction of interest (a string is acceptible if using only one ROI) and (4) a struct containing special augmentation commands to the algorithm (options) which will be discussed in more detail in the following sections. Note that the options struct is only necessary for custimizing the algorithm performance, and the algorithm runs sufficiently with only the first three inputs as well. Shown below is an example where the nutrition algorithm is asked to maximize the Biomass reaction in the mainSalmon model:</span></div><div class="CodeBlock"><div class="inlineWrapper outputs"><div  class = 'S11'><span style="white-space: pre"><span >[newDietModel,pointsModel,roiFlux,pointsModelSln,menuChanges,detailedAnalysis]=nutritionAlgorithm(mainSalmon,</span><span style="color: rgb(167, 9, 245);">'Biomass'</span><span >,</span><span style="color: rgb(167, 9, 245);">'max'</span><span >);</span></span></div><div  class = 'S4'><div class="inlineElement eoOutputWrapper disableDefaultGestureHandling embeddedOutputsTextElement" uid="B6506467" prevent-scroll="true" data-testid="output_4" tabindex="-1" style="width: 1145px; white-space: pre; font-style: normal; color: rgb(33, 33, 33); font-size: 12px;"><div class=" textElement eoOutputContent" tabindex="-1" data-previous-available-width="1108" data-previous-scroll-height="61" data-hashorizontaloverflow="false" role="article" aria-roledescription="Use Browse Mode to explore " aria-description="text output " style="max-height: 261px; white-space: pre; font-style: normal; color: rgb(33, 33, 33); font-size: 12px;">_____________________________________________________
Solution points =-1.7993
0.30286 come from diet
-2.1021 come from rois</div></div><div class="inlineElement eoOutputWrapper disableDefaultGestureHandling embeddedOutputsVariableTableElement" uid="04261BEE" prevent-scroll="true" data-testid="output_5" tabindex="-1" style="width: calc(100% - 5px);"><div class="outputLayer selectedOutputDecorationLayer doNotExport" aria-hidden="true"></div><div class="outputLayer activeOutputDecorationLayer doNotExport" aria-hidden="true"></div><div class="outputLayer scrollableOutputDecorationLayer doNotExport" aria-hidden="true"></div><div class="outputLayer navigationFocusLayer doNotExport" aria-hidden="false" role="application" tabindex="-1"></div><div class="ClientDocument veSpecifier table DataFitToViewport" id="variableeditor_client_Document_0" widgetid="variableeditor_client_Document_0" tabindex="0" aria-labelledby="variableeditor_views_SummaryBar_0"><div class="summaryBar" style="font-size: 12px; font-family: Consolas, Inconsolata, Menlo, monospace;"><span>menuChanges = </span><span style="color: rgb(179, 179, 179); font-style: normal;">1×2 table </span></div><div id="variableeditor_TableViewModel_0" widgetid="variableeditor_TableViewModel_0" class="table lightWeightView ClientViewDiv hasSummaryBar" data-viewid="__1" style="width: 100%; overflow: auto;"><table cellspacing="0" style="border-spacing: 0px; border-collapse: collapse;"><thead><tr><th rowspan="1" style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 34px; border: 1px solid rgb(191, 191, 191); text-align: left; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span></span></th><th style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 86px; min-width: 86px; max-width: 86px; border: 1px solid rgb(191, 191, 191); text-align: center; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span>Food&nbsp;Rxn</span></th><th style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 75px; min-width: 75px; max-width: 75px; border: 1px solid rgb(191, 191, 191); text-align: center; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span>Flux</span></th></tr></thead><tbody><tr><th style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 34px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span>1</span></th><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 86px; min-width: 86px; max-width: 86px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>'Food_Added_EX_pi_e'</span></td><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 75px; min-width: 75px; max-width: 75px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>-0.3029</span></td></tr></tbody></table></div></div></div><div class="inlineElement eoOutputWrapper disableDefaultGestureHandling embeddedOutputsTextElement" uid="FFEEB8E3" prevent-scroll="true" data-testid="output_6" tabindex="-1" style="width: 1145px; white-space: pre; font-style: normal; color: rgb(33, 33, 33); font-size: 12px;"><div class=" textElement eoOutputContent" tabindex="-1" data-previous-available-width="1108" data-previous-scroll-height="105" data-hashorizontaloverflow="false" role="article" aria-roledescription="Use Browse Mode to explore " aria-description="text output " style="max-height: 261px; white-space: pre; font-style: normal; color: rgb(33, 33, 33); font-size: 12px;">Points Simulation Solution:
   Biomass flux = 2.1021
Detailed Analysis:
 Biomass
   Original Diet RoI range = 0:1.6135
   New Diet RoI range = 0:2.1021
_____________________________________________________</div></div></div></div></div><div  class = 'S8'><span>The nutrition algorithm outputs six objects and prints a display containing details of the solution. First, let's cover the display contents. The first three lines details the point value produced by the solution and the number of points produced (positive value) or consumed (negative) value by the diet and the ROIs. A table is also displayed regarding the recommended dietary changes and a description of the reaction of interest fluxes is provided. In this case, the algorithm recommends adding 0.3 mmol of phosphate to the diet to acheive a Biomass flux of 2.1. </span></div><div  class = 'S1'><span>Finally, a more in depth analysis is provided that examines the potential range in fluxes for the ROIs on the original diet compared to the new diet. This describes that a flux variablity of 0 to 1.61 grams of Biomass flux was achievable on the original diet in comparision to 0 to 2.1 grams on the new diet. </span></div><div  class = 'S1'><span>The outputs of the model include (1) an updated version of the original inputted model that includes changes to the bounds of the dietary reactions to reflect suggestions of the algorithm (newDietModel), (2) a version of the model (pointsModel) that is augmented to include Food_Added, Food_Removed and points relevant reactions (i.e., the model that is actually used to find the optimal diet), (3) the flux of the reactions of interest in the points solution (roiFlux), (4) the overall points model solution (pointsModelSln), (5) a summary of the optimal dietary changes (menuChanges) and (6) a struct containing the solution results for each simulation behind the detailed analysis. Each of outputs can be helpful to explore the model solution. For instance, pointsModel and pointsModelSln can be used together to explore the points model solution:</span></div><div class="CodeBlock"><div class="inlineWrapper outputs"><div  class = 'S11'><span style="white-space: pre"><span >surfNet(pointsModel,</span><span style="color: rgb(167, 9, 245);">'point[P]'</span><span >,[],pointsModelSln.v)</span></span></div><div  class = 'S4'><div class="inlineElement eoOutputWrapper disableDefaultGestureHandling embeddedOutputsTextElement" uid="00D872D9" prevent-scroll="true" data-testid="output_7" tabindex="-1" style="width: 1145px; white-space: pre; font-style: normal; color: rgb(33, 33, 33); font-size: 12px;"><div class=" textElement eoOutputContent" tabindex="-1" data-previous-available-width="1108" data-previous-scroll-height="179" data-hashorizontaloverflow="false" role="article" aria-roledescription="Use Browse Mode to explore " aria-description="text output " style="max-height: 261px; white-space: pre; font-style: normal; color: rgb(33, 33, 33); font-size: 12px;">Met #535  point[P], point[P], , metCharges: NaN

Consuming reactions with non-zero fluxes :
  #895  Point_EX_roiPoints[roiP]_[P] (-2.102142), Bd: -1000000 / 1000000, Point_EX_roiPoints[roiP]_[P], grRules: 
roiPoint[roiP]   &lt;-   point[P] 
Producing reactions with non-zero fluxes :
  #870  Point_EX_unitOfFoodChange[dP]_[P] (0.30286), Bd: -1000000 / 1000000, Point_EX_unitOfFoodChange[dP]_[P], grRules: 
unitOfFoodChange[dP]   -&gt;   point[P] 
  #871  Point_EX_Point[P] (-1.799282), Bd: -1000000 / 1000000, Point_EX_Point[P], grRules: 
point[P]   &lt;- 

Show previous steps...</div></div></div></div></div><h2  class = 'S10'><span style=' text-decoration: underline;'>Manipulating Nutrition Algorithm Outputs:</span></h2><div  class = 'S1'><span></span></div><div  class = 'S1'><span>There are two ways that the outputs of the algorithm can be manipulated. The first is that the command window outputs can be turned off using the options struct as follows:</span></div><div class="CodeBlock"><div class="inlineWrapper"><div  class = 'S2'><span style="white-space: pre"><span >options.display=</span><span style="color: rgb(167, 9, 245);">'off'</span><span >;</span></span></div></div><div class="inlineWrapper"><div  class = 'S7'><span style="white-space: pre"><span >[newDietModel,pointsModel,roiFlux,pointsModelSln,menuChanges,detailedAnalysis]=nutritionAlgorithm(mainSalmon,</span><span style="color: rgb(167, 9, 245);">'Biomass'</span><span >,</span><span style="color: rgb(167, 9, 245);">'max'</span><span >,options);</span></span></div></div></div><div  class = 'S8'><span>Another option is to turn off the detailed analysis. This is useful to enhance the speed of the function if the user is not interested in investigating the solution flux variability:</span></div><div class="CodeBlock"><div class="inlineWrapper"><div  class = 'S2'><span style="white-space: pre"><span >options.slnType=</span><span style="color: rgb(167, 9, 245);">'Quick'</span><span >;</span></span></div></div><div class="inlineWrapper"><div  class = 'S12'><span style="white-space: pre"><span >tic</span></span></div></div><div class="inlineWrapper"><div  class = 'S12'><span style="white-space: pre"><span >nutritionAlgorithm(mainSalmon,</span><span style="color: rgb(167, 9, 245);">'Biomass'</span><span >,</span><span style="color: rgb(167, 9, 245);">'max'</span><span >,options);</span></span></div></div><div class="inlineWrapper outputs"><div  class = 'S3'><span style="white-space: pre"><span >qSln=toc</span></span></div><div  class = 'S4'><div class='variableElement' style='font-family: Menlo, Monaco, Consolas, "Courier New", monospace; font-size: 12px; '>qSln = 0.2834</div></div></div><div class="inlineWrapper"><div  class = 'S9'><span style="white-space: pre"><span >options.slnType=</span><span style="color: rgb(167, 9, 245);">'Detailed'</span><span >;</span></span></div></div><div class="inlineWrapper"><div  class = 'S12'><span style="white-space: pre"><span >tic</span></span></div></div><div class="inlineWrapper"><div  class = 'S12'><span style="white-space: pre"><span >nutritionAlgorithm(mainSalmon,</span><span style="color: rgb(167, 9, 245);">'Biomass'</span><span >,</span><span style="color: rgb(167, 9, 245);">'max'</span><span >,options);</span></span></div></div><div class="inlineWrapper outputs"><div  class = 'S3'><span style="white-space: pre"><span >dSln=toc</span></span></div><div  class = 'S4'><div class='variableElement' style='font-family: Menlo, Monaco, Consolas, "Courier New", monospace; font-size: 12px; '>dSln = 0.4146</div></div></div></div><h2  class = 'S10'><span>Weighting Reaction of Interest:</span></h2><div  class = 'S1'><span>As the nutrition algorithm aims to strike a balance between shifting diet and driving metabolic change, it may be of the interest for the user to manipulate how the algorithm finds that balance. To do so, an easy method is to adjust the weighting of the reaction of interest through the options struct variable. While the default weighting for each ROI is equal to one, in this example we show how to increase the weight of ‘Biomass’ to five.</span></div><div class="CodeBlock"><div class="inlineWrapper"><div  class = 'S2'><span style="white-space: pre"><span >clear </span><span style="color: rgb(167, 9, 245);">options</span></span></div></div><div class="inlineWrapper"><div  class = 'S12'><span style="white-space: pre"><span >options.roiWeights=5;</span></span></div></div><div class="inlineWrapper outputs"><div  class = 'S3'><span style="white-space: pre"><span >[newDietModel,pointsModel,roiFlux,pointsModelSln,menuChanges,detailedAnalysis]=nutritionAlgorithm(mainSalmon,</span><span style="color: rgb(167, 9, 245);">'Biomass'</span><span >,</span><span style="color: rgb(167, 9, 245);">'max'</span><span >,options);</span></span></div><div  class = 'S4'><div class="inlineElement eoOutputWrapper disableDefaultGestureHandling embeddedOutputsTextElement" uid="CF9F07C7" prevent-scroll="true" data-testid="output_10" tabindex="-1" style="width: 1145px; white-space: pre; font-style: normal; color: rgb(33, 33, 33); font-size: 12px;"><div class=" textElement eoOutputContent" tabindex="-1" data-previous-available-width="1108" data-previous-scroll-height="61" data-hashorizontaloverflow="false" role="article" aria-roledescription="Use Browse Mode to explore " aria-description="text output " style="max-height: 261px; white-space: pre; font-style: normal; color: rgb(33, 33, 33); font-size: 12px;">_____________________________________________________
Solution points =-12.8829
9.5966 come from diet
-22.4795 come from rois</div></div><div class="inlineElement eoOutputWrapper disableDefaultGestureHandling embeddedOutputsVariableTableElement" uid="837E735E" prevent-scroll="true" data-testid="output_11" tabindex="-1" style="width: calc(100% - 5px);"><div class="outputLayer selectedOutputDecorationLayer doNotExport" aria-hidden="true"></div><div class="outputLayer activeOutputDecorationLayer doNotExport" aria-hidden="true"></div><div class="outputLayer scrollableOutputDecorationLayer doNotExport" aria-hidden="true"></div><div class="outputLayer navigationFocusLayer doNotExport" aria-hidden="false" role="application" tabindex="-1"></div><div class="ClientDocument veSpecifier table DataFitToViewport" id="variableeditor_client_Document_1" widgetid="variableeditor_client_Document_1" tabindex="0" aria-labelledby="variableeditor_views_SummaryBar_1"><div class="summaryBar" style="font-size: 12px; font-family: Consolas, Inconsolata, Menlo, monospace;"><span>menuChanges = </span><span style="color: rgb(179, 179, 179); font-style: normal;">4×2 table </span></div><div id="variableeditor_TableViewModel_1" widgetid="variableeditor_TableViewModel_1" class="table lightWeightView ClientViewDiv hasSummaryBar" data-viewid="__1" style="width: 100%; overflow: auto;"><table cellspacing="0" style="border-spacing: 0px; border-collapse: collapse;"><thead><tr><th rowspan="1" style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 34px; border: 1px solid rgb(191, 191, 191); text-align: left; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span></span></th><th style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 86px; min-width: 86px; max-width: 86px; border: 1px solid rgb(191, 191, 191); text-align: center; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span>Food&nbsp;Rxn</span></th><th style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 75px; min-width: 75px; max-width: 75px; border: 1px solid rgb(191, 191, 191); text-align: center; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span>Flux</span></th></tr></thead><tbody><tr><th style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 34px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span>1</span></th><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 86px; min-width: 86px; max-width: 86px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>'Food_Added_EX_FM_e'</span></td><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 75px; min-width: 75px; max-width: 75px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>-6.6410</span></td></tr><tr><th style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 34px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span>2</span></th><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 86px; min-width: 86px; max-width: 86px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>'Food_Added_EX_chol_e'</span></td><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 75px; min-width: 75px; max-width: 75px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>-1.1622</span></td></tr><tr><th style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 34px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span>3</span></th><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 86px; min-width: 86px; max-width: 86px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>'Food_Added_EX_pi_e'</span></td><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 75px; min-width: 75px; max-width: 75px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>-1.7865</span></td></tr><tr><th style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 34px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span>4</span></th><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 86px; min-width: 86px; max-width: 86px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>'Food_Added_EX_thymd_e'</span></td><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 75px; min-width: 75px; max-width: 75px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>-0.0069</span></td></tr></tbody></table></div></div></div><div class="inlineElement eoOutputWrapper disableDefaultGestureHandling embeddedOutputsTextElement" uid="8BDCEF5B" prevent-scroll="true" data-testid="output_12" tabindex="-1" style="width: 1145px; white-space: pre; font-style: normal; color: rgb(33, 33, 33); font-size: 12px;"><div class=" textElement eoOutputContent" tabindex="-1" data-previous-available-width="1108" data-previous-scroll-height="105" data-hashorizontaloverflow="false" role="article" aria-roledescription="Use Browse Mode to explore " aria-description="text output " style="max-height: 261px; white-space: pre; font-style: normal; color: rgb(33, 33, 33); font-size: 12px;">Points Simulation Solution:
   Biomass flux = 4.4959
Detailed Analysis:
 Biomass
   Original Diet RoI range = 0:1.6135
   New Diet RoI range = 0:4.4959
_____________________________________________________</div></div></div></div></div><div  class = 'S8'><span>Under these new weighting conditions (Fig 2B) the algorithm recommends adding fish meal, choline, phosphate and thymidine to achieve a new biomass flux of 4.5 grams a day.  The initial default weighting of one resulting in the recomendation of only adding phosphate to achieve biomass flux of 2.1 grams a day. In short, increasing the weight of a reaction of interest encourages the algorithm to find more extreme shifts in a ROI at the cost of permitting larger changes to the initial diet. </span></div><h2  class = 'S10'><span>Targeting Multiple reactions of Interest:</span></h2><div  class = 'S1'><span>Perhaps the most powerful feature of the nutrition algorithm is its ability to optimize feed to target multiple ROIs simultaneously. In the case of salmon, a farmer might like to identify a feed that maximizes growth rate and minimizes nitrogen waste at the same time. This scenario can be specified as follows:</span></div><div class="CodeBlock"><div class="inlineWrapper"><div  class = 'S2'><span style="white-space: pre"><span >clear </span><span style="color: rgb(167, 9, 245);">options</span></span></div></div><div class="inlineWrapper"><div  class = 'S12'><span style="white-space: pre"><span >mainSalmon=addElementTracker(mainSalmon,</span><span style="color: rgb(167, 9, 245);">'N'</span><span >,</span><span style="color: rgb(167, 9, 245);">'Exit'</span><span >); </span><span style="color: rgb(0, 128, 19);">% Add nitrogen waste reaction to track nitrogen excretion rate</span></span></div></div><div class="inlineWrapper outputs"><div  class = 'S3'><span style="white-space: pre"><span >[newDietModel,pointsModel,roiFlux,pointsModelSln,menuChanges,detailedAnalysis]=nutritionAlgorithm(mainSalmon,{</span><span style="color: rgb(167, 9, 245);">'Biomass'</span><span >,</span><span style="color: rgb(167, 9, 245);">'N_Track'</span><span >},{</span><span style="color: rgb(167, 9, 245);">'max'</span><span >,</span><span style="color: rgb(167, 9, 245);">'min'</span><span >});</span></span></div><div  class = 'S4'><div class="inlineElement eoOutputWrapper disableDefaultGestureHandling embeddedOutputsTextElement" uid="B280B034" prevent-scroll="true" data-testid="output_13" tabindex="-1" style="width: 1145px; white-space: pre; font-style: normal; color: rgb(33, 33, 33); font-size: 12px;"><div class=" textElement eoOutputContent" tabindex="-1" data-previous-available-width="1108" data-previous-scroll-height="61" data-hashorizontaloverflow="false" role="article" aria-roledescription="Use Browse Mode to explore " aria-description="text output " style="max-height: 261px; white-space: pre; font-style: normal; color: rgb(33, 33, 33); font-size: 12px;">_____________________________________________________
Solution points =0.12019
1.4418 come from diet
-1.3216 come from rois</div></div><div class="inlineElement eoOutputWrapper disableDefaultGestureHandling embeddedOutputsVariableTableElement" uid="EF5DBA78" prevent-scroll="true" data-testid="output_14" tabindex="-1" style="width: calc(100% - 5px);"><div class="outputLayer selectedOutputDecorationLayer doNotExport" aria-hidden="true"></div><div class="outputLayer activeOutputDecorationLayer doNotExport" aria-hidden="true"></div><div class="outputLayer scrollableOutputDecorationLayer doNotExport" aria-hidden="true"></div><div class="outputLayer navigationFocusLayer doNotExport" aria-hidden="false" role="application" tabindex="-1"></div><div class="ClientDocument veSpecifier table DataFitToViewport" id="variableeditor_client_Document_2" widgetid="variableeditor_client_Document_2" tabindex="0" aria-labelledby="variableeditor_views_SummaryBar_2"><div class="summaryBar" style="font-size: 12px; font-family: Consolas, Inconsolata, Menlo, monospace;"><span>menuChanges = </span><span style="color: rgb(179, 179, 179); font-style: normal;">2×2 table </span></div><div id="variableeditor_TableViewModel_2" widgetid="variableeditor_TableViewModel_2" class="table lightWeightView ClientViewDiv hasSummaryBar" data-viewid="__1" style="width: 100%; overflow: auto;"><table cellspacing="0" style="border-spacing: 0px; border-collapse: collapse;"><thead><tr><th rowspan="1" style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 34px; border: 1px solid rgb(191, 191, 191); text-align: left; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span></span></th><th style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 86px; min-width: 86px; max-width: 86px; border: 1px solid rgb(191, 191, 191); text-align: center; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span>Food&nbsp;Rxn</span></th><th style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 75px; min-width: 75px; max-width: 75px; border: 1px solid rgb(191, 191, 191); text-align: center; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span>Flux</span></th></tr></thead><tbody><tr><th style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 34px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span>1</span></th><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 86px; min-width: 86px; max-width: 86px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>'Food_Added_EX_met__L_e'</span></td><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 75px; min-width: 75px; max-width: 75px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>-1.2322</span></td></tr><tr><th style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 34px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span>2</span></th><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 86px; min-width: 86px; max-width: 86px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>'Food_Added_EX_pi_e'</span></td><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 75px; min-width: 75px; max-width: 75px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>-0.2096</span></td></tr></tbody></table></div></div></div><div class="inlineElement eoOutputWrapper disableDefaultGestureHandling embeddedOutputsTextElement" uid="D4F529D6" prevent-scroll="true" data-testid="output_15" tabindex="-1" style="width: 1145px; white-space: pre; font-style: normal; color: rgb(33, 33, 33); font-size: 12px;"><div class=" textElement eoOutputContent" tabindex="-1" data-previous-available-width="1108" data-previous-scroll-height="164" data-hashorizontaloverflow="false" role="article" aria-roledescription="Use Browse Mode to explore " aria-description="text output " style="max-height: 261px; white-space: pre; font-style: normal; color: rgb(33, 33, 33); font-size: 12px;">Points Simulation Solution:
   Biomass flux = 1.9517
   N_Track flux = 0.63013
Detailed Analysis:
 Biomass
   Original Diet RoI range = 0:1.6135
   New Diet RoI range = 0:1.9517
 N_Track
   Original Diet RoI range = 3.7975:9.8893
   New Diet RoI range = 0.63013:9.1396
_____________________________________________________</div></div></div></div></div><div  class = 'S8'><span>As you can see, the algorithm simultaneously optimized the diet such that the new diet's corresponding nitrogen waste flux is reduced the new biomass is greater than the original.</span></div><div  class = 'S1'><span>Note that, in general this analysis assumes that an organism's objective function is maximized and the variability analyis provides the flux solutions feasible at that maximal objective function flux. Thus, the nitrogen waste reported for the original diet and the new diet corresponded to a biomass flux of 1.6135 and 1.9517, respectively. However, if the ROI is the objective function, such as in this case, then the analysis is not restricted to a maximal objective function flux. This is why the biomass is reported as a range of values rather than just the maximal.</span></div><h2  class = 'S10'><span></span></h2><h2  class = 'S6'><span>Limiting Solution Space:</span></h2><div  class = 'S1'><span>The nutrition algorithm tracks the points produced from adding and removing food. The user can leverage this to to impose specific limits to the solution space to restrict the flux of total points produced from either adding food or removing it:</span></div><div class="CodeBlock"><div class="inlineWrapper"><div  class = 'S2'><span style="white-space: pre"><span >clear </span><span style="color: rgb(167, 9, 245);">options</span></span></div></div><div class="inlineWrapper"><div  class = 'S12'><span style="white-space: pre"><span >options.foodAddedLimit=1;</span></span></div></div><div class="inlineWrapper outputs"><div  class = 'S3'><span style="white-space: pre"><span >[newDietModel,pointsModel,roiFlux,pointsModelSln,menuChanges,detailedAnalysis]=nutritionAlgorithm(mainSalmon,{</span><span style="color: rgb(167, 9, 245);">'Biomass'</span><span >,</span><span style="color: rgb(167, 9, 245);">'N_Track'</span><span >},{</span><span style="color: rgb(167, 9, 245);">'max'</span><span >,</span><span style="color: rgb(167, 9, 245);">'min'</span><span >},options);</span></span></div><div  class = 'S4'><div class="inlineElement eoOutputWrapper disableDefaultGestureHandling embeddedOutputsTextElement" uid="400FC353" prevent-scroll="true" data-testid="output_16" tabindex="-1" style="width: 1145px; white-space: pre; font-style: normal; color: rgb(33, 33, 33); font-size: 12px;"><div class=" textElement eoOutputContent" tabindex="-1" data-previous-available-width="1108" data-previous-scroll-height="61" data-hashorizontaloverflow="false" role="article" aria-roledescription="Use Browse Mode to explore " aria-description="text output " style="max-height: 261px; white-space: pre; font-style: normal; color: rgb(33, 33, 33); font-size: 12px;">_____________________________________________________
Solution points =0.2006
1.3975 come from diet
-1.1969 come from rois</div></div><div class="inlineElement eoOutputWrapper disableDefaultGestureHandling embeddedOutputsVariableTableElement" uid="1B9B95BC" prevent-scroll="true" data-testid="output_17" tabindex="-1" style="width: calc(100% - 5px);"><div class="outputLayer selectedOutputDecorationLayer doNotExport" aria-hidden="true"></div><div class="outputLayer activeOutputDecorationLayer doNotExport" aria-hidden="true"></div><div class="outputLayer scrollableOutputDecorationLayer doNotExport" aria-hidden="true"></div><div class="outputLayer navigationFocusLayer doNotExport" aria-hidden="false" role="application" tabindex="-1"></div><div class="ClientDocument veSpecifier table DataFitToViewport" id="variableeditor_client_Document_3" widgetid="variableeditor_client_Document_3" tabindex="0" aria-labelledby="variableeditor_views_SummaryBar_3"><div class="summaryBar" style="font-size: 12px; font-family: Consolas, Inconsolata, Menlo, monospace;"><span>menuChanges = </span><span style="color: rgb(179, 179, 179); font-style: normal;">3×2 table </span></div><div id="variableeditor_TableViewModel_3" widgetid="variableeditor_TableViewModel_3" class="table lightWeightView ClientViewDiv hasSummaryBar" data-viewid="__1" style="width: 100%; overflow: auto;"><table cellspacing="0" style="border-spacing: 0px; border-collapse: collapse;"><thead><tr><th rowspan="1" style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 34px; border: 1px solid rgb(191, 191, 191); text-align: left; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span></span></th><th style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 86px; min-width: 86px; max-width: 86px; border: 1px solid rgb(191, 191, 191); text-align: center; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span>Food&nbsp;Rxn</span></th><th style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 75px; min-width: 75px; max-width: 75px; border: 1px solid rgb(191, 191, 191); text-align: center; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span>Flux</span></th></tr></thead><tbody><tr><th style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 34px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span>1</span></th><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 86px; min-width: 86px; max-width: 86px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>'Food_Added_EX_met__L_e'</span></td><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 75px; min-width: 75px; max-width: 75px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>-0.8714</span></td></tr><tr><th style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 34px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span>2</span></th><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 86px; min-width: 86px; max-width: 86px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>'Food_Added_EX_pi_e'</span></td><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 75px; min-width: 75px; max-width: 75px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>-0.1286</span></td></tr><tr><th style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 34px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span>3</span></th><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 86px; min-width: 86px; max-width: 86px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>'Food_Removed_EX_FM_e'</span></td><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 75px; min-width: 75px; max-width: 75px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>-0.3975</span></td></tr></tbody></table></div></div></div><div class="inlineElement eoOutputWrapper disableDefaultGestureHandling embeddedOutputsTextElement" uid="C0D85E8D" prevent-scroll="true" data-testid="output_18" tabindex="-1" style="width: 1145px; white-space: pre; font-style: normal; color: rgb(33, 33, 33); font-size: 12px;"><div class=" textElement eoOutputContent" tabindex="-1" data-previous-available-width="1108" data-previous-scroll-height="164" data-hashorizontaloverflow="false" role="article" aria-roledescription="Use Browse Mode to explore " aria-description="text output " style="max-height: 261px; white-space: pre; font-style: normal; color: rgb(33, 33, 33); font-size: 12px;">Points Simulation Solution:
   Biomass flux = 1.8209
   N_Track flux = 0.62399
Detailed Analysis:
 Biomass
   Original Diet RoI range = 0:1.6135
   New Diet RoI range = 0:1.8209
 N_Track
   Original Diet RoI range = 3.7975:9.8893
   New Diet RoI range = 0.62399:6.7058
_____________________________________________________</div></div></div></div></div><div  class = 'S8'><span>If you take the summation of flux, you will find that it adds up to one for the foodAdded reactions, but it also removes food as well. If you would like to further restrict the solution to not remove any food you can do so as follows:</span></div><div class="CodeBlock"><div class="inlineWrapper"><div  class = 'S2'><span style="white-space: pre"><span >options.foodAddedLimit=1;</span></span></div></div><div class="inlineWrapper"><div  class = 'S12'><span style="white-space: pre"><span >options.foodRemovedLimit=0;</span></span></div></div><div class="inlineWrapper outputs"><div  class = 'S3'><span style="white-space: pre"><span >[newDietModel,pointsModel,roiFlux,pointsModelSln,menuChanges,detailedAnalysis]=nutritionAlgorithm(mainSalmon,{</span><span style="color: rgb(167, 9, 245);">'Biomass'</span><span >,</span><span style="color: rgb(167, 9, 245);">'N_Track'</span><span >},{</span><span style="color: rgb(167, 9, 245);">'max'</span><span >,</span><span style="color: rgb(167, 9, 245);">'min'</span><span >},options);</span></span></div><div  class = 'S4'><div class="inlineElement eoOutputWrapper disableDefaultGestureHandling embeddedOutputsTextElement" uid="77DEAE5F" prevent-scroll="true" data-testid="output_19" tabindex="-1" style="width: 1145px; white-space: pre; font-style: normal; color: rgb(33, 33, 33); font-size: 12px;"><div class=" textElement eoOutputContent" tabindex="-1" data-previous-available-width="1108" data-previous-scroll-height="61" data-hashorizontaloverflow="false" role="article" aria-roledescription="Use Browse Mode to explore " aria-description="text output " style="max-height: 261px; white-space: pre; font-style: normal; color: rgb(33, 33, 33); font-size: 12px;">_____________________________________________________
Solution points =0.49619
1 come from diet
-0.50381 come from rois</div></div><div class="inlineElement eoOutputWrapper disableDefaultGestureHandling embeddedOutputsVariableTableElement" uid="C835D862" prevent-scroll="true" data-testid="output_20" tabindex="-1" style="width: calc(100% - 5px);"><div class="outputLayer selectedOutputDecorationLayer doNotExport" aria-hidden="true"></div><div class="outputLayer activeOutputDecorationLayer doNotExport" aria-hidden="true"></div><div class="outputLayer scrollableOutputDecorationLayer doNotExport" aria-hidden="true"></div><div class="outputLayer navigationFocusLayer doNotExport" aria-hidden="false" role="application" tabindex="-1"></div><div class="ClientDocument veSpecifier table DataFitToViewport" id="variableeditor_client_Document_4" widgetid="variableeditor_client_Document_4" tabindex="0" aria-labelledby="variableeditor_views_SummaryBar_4"><div class="summaryBar" style="font-size: 12px; font-family: Consolas, Inconsolata, Menlo, monospace;"><span>menuChanges = </span><span style="color: rgb(179, 179, 179); font-style: normal;">2×2 table </span></div><div id="variableeditor_TableViewModel_4" widgetid="variableeditor_TableViewModel_4" class="table lightWeightView ClientViewDiv hasSummaryBar" data-viewid="__1" style="width: 100%; overflow: auto;"><table cellspacing="0" style="border-spacing: 0px; border-collapse: collapse;"><thead><tr><th rowspan="1" style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 34px; border: 1px solid rgb(191, 191, 191); text-align: left; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span></span></th><th style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 86px; min-width: 86px; max-width: 86px; border: 1px solid rgb(191, 191, 191); text-align: center; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span>Food&nbsp;Rxn</span></th><th style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 75px; min-width: 75px; max-width: 75px; border: 1px solid rgb(191, 191, 191); text-align: center; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span>Flux</span></th></tr></thead><tbody><tr><th style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 34px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span>1</span></th><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 86px; min-width: 86px; max-width: 86px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>'Food_Added_EX_met__L_e'</span></td><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 75px; min-width: 75px; max-width: 75px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>-0.7743</span></td></tr><tr><th style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 34px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span>2</span></th><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 86px; min-width: 86px; max-width: 86px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>'Food_Added_EX_pi_e'</span></td><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 75px; min-width: 75px; max-width: 75px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>-0.2257</span></td></tr></tbody></table></div></div></div><div class="inlineElement eoOutputWrapper disableDefaultGestureHandling embeddedOutputsTextElement" uid="88F11ECA" prevent-scroll="true" data-testid="output_21" tabindex="-1" style="width: 1145px; white-space: pre; font-style: normal; color: rgb(33, 33, 33); font-size: 12px;"><div class=" textElement eoOutputContent" tabindex="-1" data-previous-available-width="1108" data-previous-scroll-height="164" data-hashorizontaloverflow="false" role="article" aria-roledescription="Use Browse Mode to explore " aria-description="text output " style="max-height: 261px; white-space: pre; font-style: normal; color: rgb(33, 33, 33); font-size: 12px;">Points Simulation Solution:
   Biomass flux = 1.9777
   N_Track flux = 1.4738
Detailed Analysis:
 Biomass
   Original Diet RoI range = 0:1.6135
   New Diet RoI range = 0:1.9777
 N_Track
   Original Diet RoI range = 3.7975:9.8893
   New Diet RoI range = 1.4738:8.5298
_____________________________________________________</div></div></div></div></div><h2  class = 'S10'><span>Customizing Weighting Scheme of Targeted Food Items:</span></h2><div  class = 'S1'><span>In many scenarios, it may be desirable to weight individual food items or to restrict the solution to only adding specific food items of interest. These types of modifications can be made using the optional variable, targetedFoodItems, which is a cell array where the specific dietary reactions are listed in the first column and the corresponding weights are listed in the second. Let's restrict our solution space to only consider manipulating the feed rate of fish meal (FM), soybean meal  (SBM) or black soldier fly (BSF)  meal and assign each variable a weight of one: </span></div><div class="CodeBlock"><div class="inlineWrapper"><div  class = 'S2'><span style="white-space: pre"><span >clear </span><span style="color: rgb(167, 9, 245);">options</span></span></div></div><div class="inlineWrapper"><div  class = 'S12'><span style="white-space: pre"><span >options.targetedDietRxns={</span><span style="color: rgb(167, 9, 245);">'Diet_EX_FM_e'</span><span >,1;</span><span style="color: rgb(167, 9, 245);">'Diet_EX_SBM_e'</span><span >,1;</span><span style="color: rgb(167, 9, 245);">'Diet_EX_BSF_e'</span><span >,1} ;</span></span></div></div><div class="inlineWrapper outputs"><div  class = 'S3'><span style="white-space: pre"><span >[newDietModel,pointsModel,roiFlux,pointsModelSln,menuChanges,detailedAnalysis]=nutritionAlgorithm(mainSalmon,{</span><span style="color: rgb(167, 9, 245);">'Biomass'</span><span >,</span><span style="color: rgb(167, 9, 245);">'N_Track'</span><span >},{</span><span style="color: rgb(167, 9, 245);">'max'</span><span >,</span><span style="color: rgb(167, 9, 245);">'min'</span><span >},options);</span></span></div><div  class = 'S4'><div class="inlineElement eoOutputWrapper disableDefaultGestureHandling embeddedOutputsTextElement" uid="E2FD35B7" prevent-scroll="true" data-testid="output_22" tabindex="-1" style="width: 1145px; white-space: pre; font-style: normal; color: rgb(33, 33, 33); font-size: 12px;"><div class=" textElement eoOutputContent" tabindex="-1" data-previous-available-width="1108" data-previous-scroll-height="61" data-hashorizontaloverflow="false" role="article" aria-roledescription="Use Browse Mode to explore " aria-description="text output " style="max-height: 261px; white-space: pre; font-style: normal; color: rgb(33, 33, 33); font-size: 12px;">_____________________________________________________
Solution points =0.70635
1.0803 come from diet
-0.37393 come from rois</div></div><div class="inlineElement eoOutputWrapper disableDefaultGestureHandling embeddedOutputsVariableTableElement" uid="2663C74C" prevent-scroll="true" data-testid="output_23" tabindex="-1" style="width: calc(100% - 5px);"><div class="outputLayer selectedOutputDecorationLayer doNotExport" aria-hidden="true"></div><div class="outputLayer activeOutputDecorationLayer doNotExport" aria-hidden="true"></div><div class="outputLayer scrollableOutputDecorationLayer doNotExport" aria-hidden="true"></div><div class="outputLayer navigationFocusLayer doNotExport" aria-hidden="false" role="application" tabindex="-1"></div><div class="ClientDocument veSpecifier table DataFitToViewport" id="variableeditor_client_Document_5" widgetid="variableeditor_client_Document_5" tabindex="0" aria-labelledby="variableeditor_views_SummaryBar_5"><div class="summaryBar" style="font-size: 12px; font-family: Consolas, Inconsolata, Menlo, monospace;"><span>menuChanges = </span><span style="color: rgb(179, 179, 179); font-style: normal;">2×2 table </span></div><div id="variableeditor_TableViewModel_5" widgetid="variableeditor_TableViewModel_5" class="table lightWeightView ClientViewDiv hasSummaryBar" data-viewid="__1" style="width: 100%; overflow: auto;"><table cellspacing="0" style="border-spacing: 0px; border-collapse: collapse;"><thead><tr><th rowspan="1" style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 34px; border: 1px solid rgb(191, 191, 191); text-align: left; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span></span></th><th style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 238px; min-width: 238px; max-width: 238px; border: 1px solid rgb(191, 191, 191); text-align: center; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span>Food&nbsp;Rxn</span></th><th style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 75px; min-width: 75px; max-width: 75px; border: 1px solid rgb(191, 191, 191); text-align: center; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span>Flux</span></th></tr></thead><tbody><tr><th style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 34px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span>1</span></th><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 238px; min-width: 238px; max-width: 238px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>'Food_Removed_EX_BSF_e'</span></td><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 75px; min-width: 75px; max-width: 75px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>-0.8355</span></td></tr><tr><th style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 34px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span>2</span></th><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 238px; min-width: 238px; max-width: 238px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>'Food_Removed_EX_FM_e'</span></td><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 75px; min-width: 75px; max-width: 75px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>-0.2448</span></td></tr></tbody></table></div></div></div><div class="inlineElement eoOutputWrapper disableDefaultGestureHandling embeddedOutputsTextElement" uid="3751B2D2" prevent-scroll="true" data-testid="output_24" tabindex="-1" style="width: 1145px; white-space: pre; font-style: normal; color: rgb(33, 33, 33); font-size: 12px;"><div class=" textElement eoOutputContent" tabindex="-1" data-previous-available-width="1108" data-previous-scroll-height="164" data-hashorizontaloverflow="false" role="article" aria-roledescription="Use Browse Mode to explore " aria-description="text output " style="max-height: 261px; white-space: pre; font-style: normal; color: rgb(33, 33, 33); font-size: 12px;">Points Simulation Solution:
   Biomass flux = 1.6135
   N_Track flux = 1.2396
Detailed Analysis:
 Biomass
   Original Diet RoI range = 0:1.6135
   New Diet RoI range = 0:1.6135
 N_Track
   Original Diet RoI range = 3.7975:9.8893
   New Diet RoI range = 1.2396:2.8432
_____________________________________________________</div></div></div></div></div><div  class = 'S8'><span>In this case algorithm suggests optimal amounts of black soldier fly and fish meal to remove from the diet to maintain growth rate and simultaneously reduce nitrogen waste. Note that the model initial state specifies a feed of 1 gram of each type of meal (i.e., fish meal, soybean meal and black soldier fly meal). </span></div><div  class = 'S1'><span>It may also be of interest to specify the weights of a few dietary reactions but assign all other dietary reactions to a specific weight. In this case, let's set all of the feed meals a weight of 1 and all other dietary reactions a weight of 0.1:</span></div><div class="CodeBlock"><div class="inlineWrapper"><div  class = 'S2'><span style="white-space: pre"><span >options.targetedDietRxns={</span><span style="color: rgb(167, 9, 245);">'Diet_EX_FM_e'</span><span >,1;</span><span style="color: rgb(167, 9, 245);">'Diet_EX_SBM_e'</span><span >,1;</span><span style="color: rgb(167, 9, 245);">'Diet_EX_BSF_e'</span><span >,1; </span><span style="color: rgb(167, 9, 245);">'All'</span><span >, 0.1} ;</span></span></div></div><div class="inlineWrapper outputs"><div  class = 'S3'><span style="white-space: pre"><span >[newDietModel,pointsModel,roiFlux,pointsModelSln,menuChanges,detailedAnalysis]=nutritionAlgorithm(mainSalmon,{</span><span style="color: rgb(167, 9, 245);">'Biomass'</span><span >,</span><span style="color: rgb(167, 9, 245);">'N_Track'</span><span >},{</span><span style="color: rgb(167, 9, 245);">'max'</span><span >,</span><span style="color: rgb(167, 9, 245);">'min'</span><span >},options);</span></span></div><div  class = 'S4'><div class="inlineElement eoOutputWrapper disableDefaultGestureHandling embeddedOutputsTextElement" uid="D6CA44BE" prevent-scroll="true" data-testid="output_25" tabindex="-1" style="width: 1145px; white-space: pre; font-style: normal; color: rgb(33, 33, 33); font-size: 12px;"><div class=" textElement eoOutputContent" tabindex="-1" data-previous-available-width="1108" data-previous-scroll-height="61" data-hashorizontaloverflow="false" role="article" aria-roledescription="Use Browse Mode to explore " aria-description="text output " style="max-height: 261px; white-space: pre; font-style: normal; color: rgb(33, 33, 33); font-size: 12px;">_____________________________________________________
Solution points =-6.335
28.3224 come from diet
-34.6574 come from rois</div></div><div class="inlineElement eoOutputWrapper disableDefaultGestureHandling embeddedOutputsVariableTableElement" uid="51C3DA2B" prevent-scroll="true" data-testid="output_26" tabindex="-1" style="width: calc(100% - 5px);"><div class="outputLayer selectedOutputDecorationLayer doNotExport" aria-hidden="true"></div><div class="outputLayer activeOutputDecorationLayer doNotExport" aria-hidden="true"></div><div class="outputLayer scrollableOutputDecorationLayer doNotExport" aria-hidden="true"></div><div class="outputLayer navigationFocusLayer doNotExport" aria-hidden="false" role="application" tabindex="-1"></div><div class="ClientDocument veSpecifier table constrictHeight" id="variableeditor_client_Document_6" widgetid="variableeditor_client_Document_6" tabindex="0" aria-labelledby="variableeditor_views_SummaryBar_6"><div class="summaryBar" style="font-size: 12px; font-family: Consolas, Inconsolata, Menlo, monospace;"><span>menuChanges = </span><span style="color: rgb(179, 179, 179); font-style: normal;">17×2 table </span></div><div id="variableeditor_TableViewModel_6" widgetid="variableeditor_TableViewModel_6" class="table lightWeightView ClientViewDiv hasSummaryBar" data-viewid="__1" style="width: 100%; overflow: auto;"><table cellspacing="0" style="border-spacing: 0px; border-collapse: collapse;"><thead><tr><th rowspan="1" style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 34px; border: 1px solid rgb(191, 191, 191); text-align: left; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span></span></th><th style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 86px; min-width: 86px; max-width: 86px; border: 1px solid rgb(191, 191, 191); text-align: center; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span>Food&nbsp;Rxn</span></th><th style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 75px; min-width: 75px; max-width: 75px; border: 1px solid rgb(191, 191, 191); text-align: center; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span>Flux</span></th></tr></thead><tbody><tr><th style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 34px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span>1</span></th><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 86px; min-width: 86px; max-width: 86px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>'Food_Added_EX_arg__L_e'</span></td><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 75px; min-width: 75px; max-width: 75px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>-5.3581</span></td></tr><tr><th style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 34px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span>2</span></th><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 86px; min-width: 86px; max-width: 86px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>'Food_Added_EX_chol_e'</span></td><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 75px; min-width: 75px; max-width: 75px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>-19.0223</span></td></tr><tr><th style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 34px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span>3</span></th><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 86px; min-width: 86px; max-width: 86px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>'Food_Added_EX_cysi__L_e'</span></td><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 75px; min-width: 75px; max-width: 75px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>-0.0611</span></td></tr><tr><th style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 34px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span>4</span></th><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 86px; min-width: 86px; max-width: 86px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>'Food_Added_EX_glc__D_e'</span></td><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 75px; min-width: 75px; max-width: 75px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>-146.9912</span></td></tr><tr><th style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 34px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span>5</span></th><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 86px; min-width: 86px; max-width: 86px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>'Food_Added_EX_his__L_e'</span></td><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 75px; min-width: 75px; max-width: 75px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>-2.1419</span></td></tr><tr><th style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 34px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span>6</span></th><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 86px; min-width: 86px; max-width: 86px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>'Food_Added_EX_ile__L_e'</span></td><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 75px; min-width: 75px; max-width: 75px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>-6.5778</span></td></tr><tr><th style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 34px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span>7</span></th><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 86px; min-width: 86px; max-width: 86px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>'Food_Added_EX_leu__L_e'</span></td><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 75px; min-width: 75px; max-width: 75px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>-9.9967</span></td></tr><tr><th style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 34px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span>8</span></th><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 86px; min-width: 86px; max-width: 86px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>'Food_Added_EX_lys__L_e'</span></td><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 75px; min-width: 75px; max-width: 75px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>-9.8247</span></td></tr><tr><th style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 34px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span>9</span></th><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 86px; min-width: 86px; max-width: 86px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>'Food_Added_EX_met__L_e'</span></td><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 75px; min-width: 75px; max-width: 75px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>-1.6330</span></td></tr><tr><th style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 34px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span>10</span></th><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 86px; min-width: 86px; max-width: 86px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>'Food_Added_EX_phe__L_e'</span></td><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 75px; min-width: 75px; max-width: 75px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>-4.5296</span></td></tr><tr><th style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 34px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span>11</span></th><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 86px; min-width: 86px; max-width: 86px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>'Food_Added_EX_pi_e'</span></td><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 75px; min-width: 75px; max-width: 75px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>-20.4799</span></td></tr><tr><th style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 34px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span>12</span></th><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 86px; min-width: 86px; max-width: 86px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>'Food_Added_EX_thr__L_e'</span></td><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 75px; min-width: 75px; max-width: 75px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>-6.5001</span></td></tr><tr><th style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 34px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span>13</span></th><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 86px; min-width: 86px; max-width: 86px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>'Food_Added_EX_thymd_e'</span></td><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 75px; min-width: 75px; max-width: 75px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>-24.4230</span></td></tr><tr><th style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 34px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span>14</span></th><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 86px; min-width: 86px; max-width: 86px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>'Food_Added_EX_trp__L_e'</span></td><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 75px; min-width: 75px; max-width: 75px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>-0.9257</span></td></tr><tr><th>⋮</th></tr></tbody></table></div></div></div><div class="inlineElement eoOutputWrapper disableDefaultGestureHandling embeddedOutputsTextElement" uid="EC3F50D6" prevent-scroll="true" data-testid="output_27" tabindex="-1" style="width: 1145px; white-space: pre; font-style: normal; color: rgb(33, 33, 33); font-size: 12px;"><div class=" textElement eoOutputContent" tabindex="-1" data-previous-available-width="1108" data-previous-scroll-height="164" data-hashorizontaloverflow="false" role="article" aria-roledescription="Use Browse Mode to explore " aria-description="text output " style="max-height: 261px; white-space: pre; font-style: normal; color: rgb(33, 33, 33); font-size: 12px;">Points Simulation Solution:
   Biomass flux = 34.6574
   N_Track flux = 0
Detailed Analysis:
 Biomass
   Original Diet RoI range = 0:1.6135
   New Diet RoI range = 0:34.6574
 N_Track
   Original Diet RoI range = 3.7975:9.8893
   New Diet RoI range = 0:9.8048e-12
_____________________________________________________</div></div></div></div></div><h2  class = 'S10'><span></span></h2><h2  class = 'S6'><span>Customizing Weighting of Food Removal Reactions:</span></h2><div  class = 'S1'><span>nutritionAlgorithm.m also allows a user to explicitely modify the weighting of food removal reactions. By default, food removal reactions are created for all dietary reactions with a lb &lt; 0 and each food removal reaction is assigned a weight of one. Before demonstrating the methods to customize food removal weighting, let's make things interesting by assigning a weighting scheme that results in a solution that identifies flux for food removal and food adding reactions:</span></div><div class="CodeBlock"><div class="inlineWrapper"><div  class = 'S2'><span style="white-space: pre"><span >clear </span><span style="color: rgb(167, 9, 245);">options</span></span></div></div><div class="inlineWrapper"><div  class = 'S12'><span style="white-space: pre"><span >options.roiWeights=[50 10];</span></span></div></div><div class="inlineWrapper"><div  class = 'S12'><span style="white-space: pre"><span >options.targetedDietRxns={</span><span style="color: rgb(167, 9, 245);">'Diet_EX_FM_e'</span><span >,0.1;</span><span style="color: rgb(167, 9, 245);">'Diet_EX_SBM_e'</span><span >,0.1;</span><span style="color: rgb(167, 9, 245);">'Diet_EX_BSF_e'</span><span >,0.1; </span><span style="color: rgb(167, 9, 245);">'All' </span><span >15};</span></span></div></div><div class="inlineWrapper outputs"><div  class = 'S3'><span style="white-space: pre"><span >[newDietModel,pointsModel,roiFlux,pointsModelSln,menuChanges,detailedAnalysis]=nutritionAlgorithm(mainSalmon,{</span><span style="color: rgb(167, 9, 245);">'Biomass'</span><span >,</span><span style="color: rgb(167, 9, 245);">'N_Track'</span><span >},{</span><span style="color: rgb(167, 9, 245);">'max'</span><span >,</span><span style="color: rgb(167, 9, 245);">'min'</span><span >},options);</span></span></div><div  class = 'S4'><div class="inlineElement eoOutputWrapper disableDefaultGestureHandling embeddedOutputsTextElement" uid="2E72B386" prevent-scroll="true" data-testid="output_28" tabindex="-1" style="width: 1145px; white-space: pre; font-style: normal; color: rgb(33, 33, 33); font-size: 12px;"><div class=" textElement eoOutputContent" tabindex="-1" data-previous-available-width="1108" data-previous-scroll-height="61" data-hashorizontaloverflow="false" role="article" aria-roledescription="Use Browse Mode to explore " aria-description="text output " style="max-height: 261px; white-space: pre; font-style: normal; color: rgb(33, 33, 33); font-size: 12px;">_____________________________________________________
Solution points =-73.5666
10.0336 come from diet
-83.6002 come from rois</div></div><div class="inlineElement eoOutputWrapper disableDefaultGestureHandling embeddedOutputsVariableTableElement" uid="47AE10AE" prevent-scroll="true" data-testid="output_29" tabindex="-1" style="width: calc(100% - 5px);"><div class="outputLayer selectedOutputDecorationLayer doNotExport" aria-hidden="true"></div><div class="outputLayer activeOutputDecorationLayer doNotExport" aria-hidden="true"></div><div class="outputLayer scrollableOutputDecorationLayer doNotExport" aria-hidden="true"></div><div class="outputLayer navigationFocusLayer doNotExport" aria-hidden="false" role="application" tabindex="-1"></div><div class="ClientDocument veSpecifier table DataFitToViewport" id="variableeditor_client_Document_7" widgetid="variableeditor_client_Document_7" tabindex="0" aria-labelledby="variableeditor_views_SummaryBar_7"><div class="summaryBar" style="font-size: 12px; font-family: Consolas, Inconsolata, Menlo, monospace;"><span>menuChanges = </span><span style="color: rgb(179, 179, 179); font-style: normal;">6×2 table </span></div><div id="variableeditor_TableViewModel_7" widgetid="variableeditor_TableViewModel_7" class="table lightWeightView ClientViewDiv hasSummaryBar" data-viewid="__1" style="width: 100%; overflow: auto;"><table cellspacing="0" style="border-spacing: 0px; border-collapse: collapse;"><thead><tr><th rowspan="1" style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 34px; border: 1px solid rgb(191, 191, 191); text-align: left; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span></span></th><th style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 144px; min-width: 144px; max-width: 144px; border: 1px solid rgb(191, 191, 191); text-align: center; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span>Food&nbsp;Rxn</span></th><th style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 75px; min-width: 75px; max-width: 75px; border: 1px solid rgb(191, 191, 191); text-align: center; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span>Flux</span></th></tr></thead><tbody><tr><th style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 34px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span>1</span></th><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 144px; min-width: 144px; max-width: 144px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>'Food_Added_EX_BSF_e'</span></td><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 75px; min-width: 75px; max-width: 75px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>-0.3373</span></td></tr><tr><th style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 34px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span>2</span></th><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 144px; min-width: 144px; max-width: 144px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>'Food_Added_EX_met__L_e'</span></td><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 75px; min-width: 75px; max-width: 75px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>-0.4859</span></td></tr><tr><th style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 34px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span>3</span></th><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 144px; min-width: 144px; max-width: 144px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>'Food_Added_EX_pi_e'</span></td><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 75px; min-width: 75px; max-width: 75px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>-0.0467</span></td></tr><tr><th style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 34px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span>4</span></th><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 144px; min-width: 144px; max-width: 144px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>'Food_Removed_EX_FM_e'</span></td><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 75px; min-width: 75px; max-width: 75px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>-0.5118</span></td></tr><tr><th style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 34px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span>5</span></th><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 144px; min-width: 144px; max-width: 144px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>'Food_Removed_EX_SBM_e'</span></td><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 75px; min-width: 75px; max-width: 75px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>-1.0000</span></td></tr><tr><th style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 34px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span>6</span></th><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 144px; min-width: 144px; max-width: 144px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>'Food_Removed_EX_chol_e'</span></td><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 75px; min-width: 75px; max-width: 75px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>-0.5000</span></td></tr></tbody></table></div></div></div><div class="inlineElement eoOutputWrapper disableDefaultGestureHandling embeddedOutputsTextElement" uid="B2B8E203" prevent-scroll="true" data-testid="output_30" tabindex="-1" style="width: 1145px; white-space: pre; font-style: normal; color: rgb(33, 33, 33); font-size: 12px;"><div class=" textElement eoOutputContent" tabindex="-1" data-previous-available-width="1108" data-previous-scroll-height="164" data-hashorizontaloverflow="false" role="article" aria-roledescription="Use Browse Mode to explore " aria-description="text output " style="max-height: 261px; white-space: pre; font-style: normal; color: rgb(33, 33, 33); font-size: 12px;">Points Simulation Solution:
   Biomass flux = 1.6888
   N_Track flux = 0.083825
Detailed Analysis:
 Biomass
   Original Diet RoI range = 0:1.6135
   New Diet RoI range = 0:1.6888
 N_Track
   Original Diet RoI range = 3.7975:9.8893
   New Diet RoI range = 0.083825:3.5572
_____________________________________________________</div></div></div></div></div><div  class = 'S8'><span>The solution specifies removal of choline, soybean meal and fish meal. But what if an aquaculture farmer is only interested in removing fishmeal from the diet? This can be specified by utilizing the foodRemovalWeighting struct field on the options variable. Just like the targetedDietRxns struct field, the foodRemovalWeighting will limit the solution space to only the items entered into the cell array. </span></div><div class="CodeBlock"><div class="inlineWrapper"><div  class = 'S2'><span style="white-space: pre"><span >options.foodRemovalWeighting={</span><span style="color: rgb(167, 9, 245);">'Diet_EX_SBM_e'</span><span >,1};</span></span></div></div><div class="inlineWrapper outputs"><div  class = 'S3'><span style="white-space: pre"><span >[newDietModel,pointsModel,roiFlux,pointsModelSln,menuChanges,detailedAnalysis]=nutritionAlgorithm(mainSalmon,{</span><span style="color: rgb(167, 9, 245);">'Biomass'</span><span >,</span><span style="color: rgb(167, 9, 245);">'N_Track'</span><span >},{</span><span style="color: rgb(167, 9, 245);">'max'</span><span >,</span><span style="color: rgb(167, 9, 245);">'min'</span><span >},options);</span></span></div><div  class = 'S4'><div class="inlineElement eoOutputWrapper disableDefaultGestureHandling embeddedOutputsTextElement" uid="E4307485" prevent-scroll="true" data-testid="output_31" tabindex="-1" style="width: 1145px; white-space: pre; font-style: normal; color: rgb(33, 33, 33); font-size: 12px;"><div class=" textElement eoOutputContent" tabindex="-1" data-previous-available-width="1108" data-previous-scroll-height="61" data-hashorizontaloverflow="false" role="article" aria-roledescription="Use Browse Mode to explore " aria-description="text output " style="max-height: 261px; white-space: pre; font-style: normal; color: rgb(33, 33, 33); font-size: 12px;">_____________________________________________________
Solution points =-71.902
50.2777 come from diet
-122.1797 come from rois</div></div><div class="inlineElement eoOutputWrapper disableDefaultGestureHandling embeddedOutputsVariableTableElement" uid="6A336EDD" prevent-scroll="true" data-testid="output_32" tabindex="-1" style="width: calc(100% - 5px);"><div class="outputLayer selectedOutputDecorationLayer doNotExport" aria-hidden="true"></div><div class="outputLayer activeOutputDecorationLayer doNotExport" aria-hidden="true"></div><div class="outputLayer scrollableOutputDecorationLayer doNotExport" aria-hidden="true"></div><div class="outputLayer navigationFocusLayer doNotExport" aria-hidden="false" role="application" tabindex="-1"></div><div class="ClientDocument veSpecifier table DataFitToViewport" id="variableeditor_client_Document_8" widgetid="variableeditor_client_Document_8" tabindex="0" aria-labelledby="variableeditor_views_SummaryBar_8"><div class="summaryBar" style="font-size: 12px; font-family: Consolas, Inconsolata, Menlo, monospace;"><span>menuChanges = </span><span style="color: rgb(179, 179, 179); font-style: normal;">4×2 table </span></div><div id="variableeditor_TableViewModel_8" widgetid="variableeditor_TableViewModel_8" class="table lightWeightView ClientViewDiv hasSummaryBar" data-viewid="__1" style="width: 100%; overflow: auto;"><table cellspacing="0" style="border-spacing: 0px; border-collapse: collapse;"><thead><tr><th rowspan="1" style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 34px; border: 1px solid rgb(191, 191, 191); text-align: left; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span></span></th><th style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 86px; min-width: 86px; max-width: 86px; border: 1px solid rgb(191, 191, 191); text-align: center; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span>Food&nbsp;Rxn</span></th><th style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 75px; min-width: 75px; max-width: 75px; border: 1px solid rgb(191, 191, 191); text-align: center; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span>Flux</span></th></tr></thead><tbody><tr><th style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 34px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span>1</span></th><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 86px; min-width: 86px; max-width: 86px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>'Food_Added_EX_BSF_e'</span></td><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 75px; min-width: 75px; max-width: 75px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>-2.3743</span></td></tr><tr><th style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 34px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span>2</span></th><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 86px; min-width: 86px; max-width: 86px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>'Food_Added_EX_met__L_e'</span></td><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 75px; min-width: 75px; max-width: 75px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>-2.6994</span></td></tr><tr><th style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 34px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span>3</span></th><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 86px; min-width: 86px; max-width: 86px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>'Food_Added_EX_pi_e'</span></td><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 75px; min-width: 75px; max-width: 75px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>-0.5700</span></td></tr><tr><th style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 34px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span>4</span></th><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 86px; min-width: 86px; max-width: 86px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>'Food_Removed_EX_SBM_e'</span></td><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 75px; min-width: 75px; max-width: 75px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>-1.0000</span></td></tr></tbody></table></div></div></div><div class="inlineElement eoOutputWrapper disableDefaultGestureHandling embeddedOutputsTextElement" uid="2986DBE3" prevent-scroll="true" data-testid="output_33" tabindex="-1" style="width: 1145px; white-space: pre; font-style: normal; color: rgb(33, 33, 33); font-size: 12px;"><div class=" textElement eoOutputContent" tabindex="-1" data-previous-available-width="1108" data-previous-scroll-height="164" data-hashorizontaloverflow="false" role="article" aria-roledescription="Use Browse Mode to explore " aria-description="text output " style="max-height: 261px; white-space: pre; font-style: normal; color: rgb(33, 33, 33); font-size: 12px;">Points Simulation Solution:
   Biomass flux = 2.5332
   N_Track flux = 0.4478
Detailed Analysis:
 Biomass
   Original Diet RoI range = 0:1.6135
   New Diet RoI range = 0:2.5332
 N_Track
   Original Diet RoI range = 3.7975:9.8893
   New Diet RoI range = 0.4478:17.8949
_____________________________________________________</div></div></div></div></div><div  class = 'S8'><span>It is also an option to tie the foodRemovalWeighting scheme directly to the targetedDietRxns array. By entering the string 'ditto' the weighting becomes equivalent between the two cell arrays:</span></div><div class="CodeBlock"><div class="inlineWrapper"><div  class = 'S2'><span style="white-space: pre"><span >options.foodRemovalWeighting=</span><span style="color: rgb(167, 9, 245);">'ditto'</span><span >;</span></span></div></div><div class="inlineWrapper outputs"><div  class = 'S3'><span style="white-space: pre"><span >[newDietModel,pointsModel,roiFlux,pointsModelSln,menuChanges,detailedAnalysis]=nutritionAlgorithm(mainSalmon,{</span><span style="color: rgb(167, 9, 245);">'Biomass'</span><span >,</span><span style="color: rgb(167, 9, 245);">'N_Track'</span><span >},{</span><span style="color: rgb(167, 9, 245);">'max'</span><span >,</span><span style="color: rgb(167, 9, 245);">'min'</span><span >},options);</span></span></div><div  class = 'S4'><div class="inlineElement eoOutputWrapper disableDefaultGestureHandling embeddedOutputsTextElement" uid="D3CCCC50" prevent-scroll="true" data-testid="output_34" tabindex="-1" style="width: 1145px; white-space: pre; font-style: normal; color: rgb(33, 33, 33); font-size: 12px;"><div class=" textElement eoOutputContent" tabindex="-1" data-previous-available-width="1108" data-previous-scroll-height="61" data-hashorizontaloverflow="false" role="article" aria-roledescription="Use Browse Mode to explore " aria-description="text output " style="max-height: 261px; white-space: pre; font-style: normal; color: rgb(33, 33, 33); font-size: 12px;">_____________________________________________________
Solution points =-74.0568
48.9333 come from diet
-122.9901 come from rois</div></div><div class="inlineElement eoOutputWrapper disableDefaultGestureHandling embeddedOutputsVariableTableElement" uid="462A3A15" prevent-scroll="true" data-testid="output_35" tabindex="-1" style="width: calc(100% - 5px);"><div class="outputLayer selectedOutputDecorationLayer doNotExport" aria-hidden="true"></div><div class="outputLayer activeOutputDecorationLayer doNotExport" aria-hidden="true"></div><div class="outputLayer scrollableOutputDecorationLayer doNotExport" aria-hidden="true"></div><div class="outputLayer navigationFocusLayer doNotExport" aria-hidden="false" role="application" tabindex="-1"></div><div class="ClientDocument veSpecifier table DataFitToViewport" id="variableeditor_client_Document_9" widgetid="variableeditor_client_Document_9" tabindex="0" aria-labelledby="variableeditor_views_SummaryBar_9"><div class="summaryBar" style="font-size: 12px; font-family: Consolas, Inconsolata, Menlo, monospace;"><span>menuChanges = </span><span style="color: rgb(179, 179, 179); font-style: normal;">5×2 table </span></div><div id="variableeditor_TableViewModel_9" widgetid="variableeditor_TableViewModel_9" class="table lightWeightView ClientViewDiv hasSummaryBar" data-viewid="__1" style="width: 100%; overflow: auto;"><table cellspacing="0" style="border-spacing: 0px; border-collapse: collapse;"><thead><tr><th rowspan="1" style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 34px; border: 1px solid rgb(191, 191, 191); text-align: left; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span></span></th><th style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 86px; min-width: 86px; max-width: 86px; border: 1px solid rgb(191, 191, 191); text-align: center; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span>Food&nbsp;Rxn</span></th><th style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 75px; min-width: 75px; max-width: 75px; border: 1px solid rgb(191, 191, 191); text-align: center; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span>Flux</span></th></tr></thead><tbody><tr><th style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 34px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span>1</span></th><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 86px; min-width: 86px; max-width: 86px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>'Food_Added_EX_BSF_e'</span></td><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 75px; min-width: 75px; max-width: 75px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>-3.3904</span></td></tr><tr><th style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 34px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span>2</span></th><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 86px; min-width: 86px; max-width: 86px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>'Food_Added_EX_met__L_e'</span></td><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 75px; min-width: 75px; max-width: 75px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>-2.6563</span></td></tr><tr><th style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 34px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span>3</span></th><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 86px; min-width: 86px; max-width: 86px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>'Food_Added_EX_pi_e'</span></td><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 75px; min-width: 75px; max-width: 75px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>-0.5700</span></td></tr><tr><th style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 34px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span>4</span></th><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 86px; min-width: 86px; max-width: 86px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>'Food_Removed_EX_FM_e'</span></td><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 75px; min-width: 75px; max-width: 75px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>-1.0000</span></td></tr><tr><th style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 34px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span>5</span></th><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 86px; min-width: 86px; max-width: 86px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>'Food_Removed_EX_SBM_e'</span></td><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 75px; min-width: 75px; max-width: 75px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>-1.0000</span></td></tr></tbody></table></div></div></div><div class="inlineElement eoOutputWrapper disableDefaultGestureHandling embeddedOutputsTextElement" uid="DFD5B1E4" prevent-scroll="true" data-testid="output_36" tabindex="-1" style="width: 1145px; white-space: pre; font-style: normal; color: rgb(33, 33, 33); font-size: 12px;"><div class=" textElement eoOutputContent" tabindex="-1" data-previous-available-width="1108" data-previous-scroll-height="164" data-hashorizontaloverflow="false" role="article" aria-roledescription="Use Browse Mode to explore " aria-description="text output " style="max-height: 261px; white-space: pre; font-style: normal; color: rgb(33, 33, 33); font-size: 12px;">Points Simulation Solution:
   Biomass flux = 2.5332
   N_Track flux = 0.36676
Detailed Analysis:
 Biomass
   Original Diet RoI range = 0:1.6135
   New Diet RoI range = 0:2.5332
 N_Track
   Original Diet RoI range = 3.7975:9.8893
   New Diet RoI range = 0.36676:17.1517
_____________________________________________________</div></div></div></div></div><div  class = 'S8'><span>Other string inputs for foodRemovalWeighting include 'inverse' and 'ones'. Inverse simply applies the inverse weights as those in targetedDietRxns and 'ones' keeps the same dietary reactionsn targeted by targetedDietRxns but assigns weights of ones to the removal reactions.</span></div><div  class = 'S1'><span>Note that in the last two examples, the new diet resulted in a nitrogen waste flux that has a much larger possible flux range than the original diet. Indeed, the lower limit of flux was reduced compared to the original diet, but the upper limit has increased. This is a consequence of the fact that the nutrition algorithm only seeks to optimize one bound. In the case of minimization, the nutrition algorithm optimizes the lower limit of flux and for maximization, it optimizes the upper limit. For more details, please see Weston and Thiele, 2022 [1].</span></div><h2  class = 'S10'><span></span></h2><h2  class = 'S6'><span>Optimizing For Profit:</span></h2><div  class = 'S1'><span>Importantly, weighting can either be abstract or tied to real attributes. The default weighting scheme is abstract, as the weights do not correspond to anything palpable. However, it may be of interest to tie weights to quantitatively precise measurements, such as cost. In fact, if both the food item weights and the ROI weights are assigned the same quantitative units, the nutrition algorithm then becomes a method for optimizing towards that quantitative unit. In the case of salmon farming, the goal is likely to optimize profit. Three apsects to profit are the cost of feed, the costs associated with nitrogen waste, and the net salmon meat produce/ sale price. As salmon is sold per mass, the biomass function can be assigned a realistic value to represent the selling price of the fish per gram. In this case, we choose €10 per kg. We can then weight the nitrogen waste reaction with an estimated cost of €0.2 per mol. Finally, the cost of each type of feed can be set to the cost per a gram. We use rough estimates of €1.3 per kg of fishmeal, €0.6 per kg of soybean meal and €3 per kg of black soldier fly meal. As a result, each “point” consumed by the model corresponds to a euro of profit and the algorithm identifies the solution that maximizes the net profit.</span></div><div class="CodeBlock"><div class="inlineWrapper"><div  class = 'S2'><span style="white-space: pre"><span >clear </span><span style="color: rgb(167, 9, 245);">options</span></span></div></div><div class="inlineWrapper"><div  class = 'S12'><span style="white-space: pre"><span >mainSalmonTemp=changeRxnBounds(mainSalmon,{</span><span style="color: rgb(167, 9, 245);">'Diet_EX_FM_e'</span><span >},0,</span><span style="color: rgb(167, 9, 245);">'b'</span><span >);</span></span></div></div><div class="inlineWrapper"><div  class = 'S12'><span style="white-space: pre"><span >mainSalmonTemp=changeRxnBounds(mainSalmonTemp,{</span><span style="color: rgb(167, 9, 245);">'Diet_EX_SBM_e'</span><span >},0,</span><span style="color: rgb(167, 9, 245);">'b'</span><span >);</span></span></div></div><div class="inlineWrapper"><div  class = 'S12'><span style="white-space: pre"><span >mainSalmonTemp=changeRxnBounds(mainSalmonTemp,{</span><span style="color: rgb(167, 9, 245);">'Diet_EX_BSF_e'</span><span >},0,</span><span style="color: rgb(167, 9, 245);">'b'</span><span >);</span></span></div></div><div class="inlineWrapper"><div  class = 'S12'><span style="white-space: pre"><span >options.roiWeights=[10/1000 0.2/1000]; </span><span style="color: rgb(0, 128, 19);">% divided by 1000 to convert from kg to g (for biomass ROI) and mol to mmol (for nitrogen excretion ROI)</span></span></div></div><div class="inlineWrapper"><div  class = 'S12'><span style="white-space: pre"><span >options.targetedDietRxns={</span><span style="color: rgb(167, 9, 245);">'Diet_EX_FM_e'</span><span >,1.3/1000;</span><span style="color: rgb(167, 9, 245);">'Diet_EX_SBM_e'</span><span >,0.6/1000;</span><span style="color: rgb(167, 9, 245);">'Diet_EX_BSF_e'</span><span >,3/1000}; </span><span style="color: rgb(0, 128, 19);">%Weights devided by 1000 to convert from kg to grams</span></span></div></div><div class="inlineWrapper outputs"><div  class = 'S3'><span style="white-space: pre"><span >[newDietModel,pointsModel,roiFlux,pointsModelSln,menuChanges,detailedAnalysis]=nutritionAlgorithm(mainSalmonTemp,{</span><span style="color: rgb(167, 9, 245);">'Biomass'</span><span >,</span><span style="color: rgb(167, 9, 245);">'N_Track'</span><span >},{</span><span style="color: rgb(167, 9, 245);">'max'</span><span >,</span><span style="color: rgb(167, 9, 245);">'min'</span><span >},options);</span></span></div><div  class = 'S4'><div class="inlineElement eoOutputWrapper disableDefaultGestureHandling embeddedOutputsTextElement" uid="12471C90" prevent-scroll="true" data-testid="output_37" tabindex="-1" style="width: 1145px; white-space: pre; font-style: normal; color: rgb(33, 33, 33); font-size: 12px;"><div class=" textElement eoOutputContent" tabindex="-1" data-previous-available-width="1108" data-previous-scroll-height="61" data-hashorizontaloverflow="false" role="article" aria-roledescription="Use Browse Mode to explore " aria-description="text output " style="max-height: 261px; white-space: pre; font-style: normal; color: rgb(33, 33, 33); font-size: 12px;">_____________________________________________________
Solution points =-0.014127
0.001711 come from diet
-0.015838 come from rois</div></div><div class="inlineElement eoOutputWrapper disableDefaultGestureHandling embeddedOutputsVariableTableElement" uid="070440BB" prevent-scroll="true" data-testid="output_38" tabindex="-1" style="width: calc(100% - 5px);"><div class="outputLayer selectedOutputDecorationLayer doNotExport" aria-hidden="true"></div><div class="outputLayer activeOutputDecorationLayer doNotExport" aria-hidden="true"></div><div class="outputLayer scrollableOutputDecorationLayer doNotExport" aria-hidden="true"></div><div class="outputLayer navigationFocusLayer doNotExport" aria-hidden="false" role="application" tabindex="-1"></div><div class="ClientDocument veSpecifier table DataFitToViewport" id="variableeditor_client_Document_10" widgetid="variableeditor_client_Document_10" tabindex="0" aria-labelledby="variableeditor_views_SummaryBar_10"><div class="summaryBar" style="font-size: 12px; font-family: Consolas, Inconsolata, Menlo, monospace;"><span>menuChanges = </span><span style="color: rgb(179, 179, 179); font-style: normal;">2×2 table </span></div><div id="variableeditor_TableViewModel_10" widgetid="variableeditor_TableViewModel_10" class="table lightWeightView ClientViewDiv hasSummaryBar" data-viewid="__1" style="width: 100%; overflow: auto;"><table cellspacing="0" style="border-spacing: 0px; border-collapse: collapse;"><thead><tr><th rowspan="1" style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 34px; border: 1px solid rgb(191, 191, 191); text-align: left; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span></span></th><th style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 204px; min-width: 204px; max-width: 204px; border: 1px solid rgb(191, 191, 191); text-align: center; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span>Food&nbsp;Rxn</span></th><th style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 75px; min-width: 75px; max-width: 75px; border: 1px solid rgb(191, 191, 191); text-align: center; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span>Flux</span></th></tr></thead><tbody><tr><th style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 34px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span>1</span></th><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 204px; min-width: 204px; max-width: 204px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>'Food_Added_EX_FM_e'</span></td><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 75px; min-width: 75px; max-width: 75px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>-0.4428</span></td></tr><tr><th style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 34px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span>2</span></th><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 204px; min-width: 204px; max-width: 204px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>'Food_Added_EX_SBM_e'</span></td><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 75px; min-width: 75px; max-width: 75px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>-1.8922</span></td></tr></tbody></table></div></div></div><div class="inlineElement eoOutputWrapper disableDefaultGestureHandling embeddedOutputsTextElement" uid="CBAC8D57" prevent-scroll="true" data-testid="output_39" tabindex="-1" style="width: 1145px; white-space: pre; font-style: normal; color: rgb(33, 33, 33); font-size: 12px;"><div class=" textElement eoOutputContent" tabindex="-1" data-previous-available-width="1108" data-previous-scroll-height="164" data-hashorizontaloverflow="false" role="article" aria-roledescription="Use Browse Mode to explore " aria-description="text output " style="max-height: 261px; white-space: pre; font-style: normal; color: rgb(33, 33, 33); font-size: 12px;">Points Simulation Solution:
   Biomass flux = 1.6135
   N_Track flux = 1.4833
Detailed Analysis:
 Biomass
   Original Diet RoI range = 0:0
   New Diet RoI range = 0:1.6135
 N_Track
   Original Diet RoI range = 1.5:1.5
   New Diet RoI range = 1.4833:3.458
_____________________________________________________</div></div></div></div></div><div  class = 'S8'><span>Here, the algorithm recommends a combination of fish meal and soybean meal at roughly a 1:5 ratio to achieve an estimate profit of €0.015 per day per a fish. Note that the model is set to reflect the growth rate of a 100 gram fish, so as the fish grows larger the feed demand, nitrogen excretion rate and profit margin will all increase linearly. </span></div><div  class = 'S1'><span>Also note here that the dietary flux of all feed components was intentionally set to zero before simulation. This ensures that all feed consumed by the model produces points (i.e., is correlated to a price) via the foodAdded reactions.</span></div><h2  class = 'S10'><span></span></h2><h2  class = 'S6'><span>Targetting a Metabolite:</span></h2><div  class = 'S1'><span>One may also be interested in optimizing for the synthesis or consumption rate of a particular metabolite. As such, nutritionAlgorithm.m takes any metabolite inputs and creates a sink or demand reaction depending on if the goal is to minimize (i.e., optimize for consumption) or maximize  (i.e., optimize for synthesis) the metabolite, respectively. This feature is demonstrated below utilizing the metabolite, 'Lipids[c]':</span></div><div class="CodeBlock"><div class="inlineWrapper"><div  class = 'S2'><span style="white-space: pre"><span >clear </span><span style="color: rgb(167, 9, 245);">options</span></span></div></div><div class="inlineWrapper"><div  class = 'S12'><span style="white-space: pre"><span >options.roiWeights=100; </span><span style="color: rgb(0, 128, 19);">%weight increased here from default to ensure solution is interesting</span></span></div></div><div class="inlineWrapper outputs"><div  class = 'S3'><span style="white-space: pre"><span >[newDietModel,pointsModel,roiFlux,pointsModelSln,menuChanges,detailedAnalysis]=nutritionAlgorithm(mainSalmon,{</span><span style="color: rgb(167, 9, 245);">'Lipids[c]'</span><span >},{</span><span style="color: rgb(167, 9, 245);">'max'</span><span >},options);</span></span></div><div  class = 'S4'><div class="inlineElement eoOutputWrapper disableDefaultGestureHandling embeddedOutputsTextElement" uid="A83A8F1F" prevent-scroll="true" data-testid="output_40" tabindex="-1" style="width: 1145px; white-space: pre; font-style: normal; color: rgb(33, 33, 33); font-size: 12px;"><div class=" textElement eoOutputContent" tabindex="-1" data-previous-available-width="1108" data-previous-scroll-height="61" data-hashorizontaloverflow="false" role="article" aria-roledescription="Use Browse Mode to explore " aria-description="text output " style="max-height: 261px; white-space: pre; font-style: normal; color: rgb(33, 33, 33); font-size: 12px;">_____________________________________________________
Solution points =-4452.5621
720.4411 come from diet
-5173.0032 come from rois</div></div><div class="inlineElement eoOutputWrapper disableDefaultGestureHandling embeddedOutputsVariableTableElement" uid="27BBEB8F" prevent-scroll="true" data-testid="output_41" tabindex="-1" style="width: calc(100% - 5px);"><div class="outputLayer selectedOutputDecorationLayer doNotExport" aria-hidden="true"></div><div class="outputLayer activeOutputDecorationLayer doNotExport" aria-hidden="true"></div><div class="outputLayer scrollableOutputDecorationLayer doNotExport" aria-hidden="true"></div><div class="outputLayer navigationFocusLayer doNotExport" aria-hidden="false" role="application" tabindex="-1"></div><div class="ClientDocument veSpecifier table DataFitToViewport" id="variableeditor_client_Document_11" widgetid="variableeditor_client_Document_11" tabindex="0" aria-labelledby="variableeditor_views_SummaryBar_11"><div class="summaryBar" style="font-size: 12px; font-family: Consolas, Inconsolata, Menlo, monospace;"><span>menuChanges = </span><span style="color: rgb(179, 179, 179); font-style: normal;">6×2 table </span></div><div id="variableeditor_TableViewModel_11" widgetid="variableeditor_TableViewModel_11" class="table lightWeightView ClientViewDiv hasSummaryBar" data-viewid="__1" style="width: 100%; overflow: auto;"><table cellspacing="0" style="border-spacing: 0px; border-collapse: collapse;"><thead><tr><th rowspan="1" style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 34px; border: 1px solid rgb(191, 191, 191); text-align: left; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span></span></th><th style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 86px; min-width: 86px; max-width: 86px; border: 1px solid rgb(191, 191, 191); text-align: center; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span>Food&nbsp;Rxn</span></th><th style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 75px; min-width: 75px; max-width: 75px; border: 1px solid rgb(191, 191, 191); text-align: center; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span>Flux</span></th></tr></thead><tbody><tr><th style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 34px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span>1</span></th><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 86px; min-width: 86px; max-width: 86px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>'Food_Added_EX_FM_e'</span></td><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 75px; min-width: 75px; max-width: 75px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>-4.6328</span></td></tr><tr><th style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 34px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span>2</span></th><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 86px; min-width: 86px; max-width: 86px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>'Food_Added_EX_chol_e'</span></td><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 75px; min-width: 75px; max-width: 75px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>-69.9286</span></td></tr><tr><th style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 34px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span>3</span></th><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 86px; min-width: 86px; max-width: 86px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>'Food_Added_EX_fru_e'</span></td><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 75px; min-width: 75px; max-width: 75px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>-528.2909</span></td></tr><tr><th style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 34px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span>4</span></th><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 86px; min-width: 86px; max-width: 86px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>'Food_Added_EX_pi_e'</span></td><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 75px; min-width: 75px; max-width: 75px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>-70.4732</span></td></tr><tr><th style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 34px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span>5</span></th><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 86px; min-width: 86px; max-width: 86px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>'Food_Added_EX_thymd_e'</span></td><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 75px; min-width: 75px; max-width: 75px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>-47.0914</span></td></tr><tr><th style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 34px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span>6</span></th><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 86px; min-width: 86px; max-width: 86px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>'Food_Added_EX_uri_e'</span></td><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 75px; min-width: 75px; max-width: 75px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>-0.0242</span></td></tr></tbody></table></div></div></div><div class="inlineElement eoOutputWrapper disableDefaultGestureHandling embeddedOutputsTextElement" uid="9BC51C77" prevent-scroll="true" data-testid="output_42" tabindex="-1" style="width: 1145px; white-space: pre; font-style: normal; color: rgb(33, 33, 33); font-size: 12px;"><div class=" textElement eoOutputContent" tabindex="-1" data-previous-available-width="1108" data-previous-scroll-height="120" data-hashorizontaloverflow="false" role="article" aria-roledescription="Use Browse Mode to explore " aria-description="text output " style="max-height: 261px; white-space: pre; font-style: normal; color: rgb(33, 33, 33); font-size: 12px;">Points Simulation Solution:
   DM_Lipids[c] flux = 51.73
Detailed Analysis:
 Original objective max flux =1.6135 &amp; New objective max flux =7.8699
 DM_Lipids[c]
   Original Diet RoI range = 0:9.1038e-14
   New Diet RoI range = 0:47.8015
_____________________________________________________</div></div></div></div></div><div  class = 'S8'><span>Note that the ROI displayed is 'DM_Lipids[c]' which indicates that it is a demand reaction for the 'Lipid[c]' metabolite.</span></div><h2  class = 'S10'><span>Objective Flux Scalar:</span></h2><div  class = 'S1'><span>Sometimes a reaction that the algorithm is asked to optimize can conflict with the flux of an organism's objective function. One way to ensure that the organism's objective function is simultaneously optimized with another ROI is by specifying the objective function as another ROI within the algorithm, as demonstrated in earlier examples. However, another method is through the objective flux scalar (OFS). The OFS is a variable that confines the algorithm to identify a solution in the context of a specific flux for an organism's objective function. An OFS of one (the default value) means that the nutrition algorithm will confine its solution  to have a lower bound for the organism's objective function that is equal to the maximum flux before a dietary change. This ensures that the nutrition algorithm is constrained to make predictions that align with the current objective function performance, and to not identify solutions that conflict with the objective function flux. In some cases, however, it may be permissible to allow a reduced flux for the organism's objective function. In such cases, one may manipulate the OFS. By reducing the OFS to 0.5, the nutrition algorithm constrains its solution such that a flux of half the initial objective function flux is permissable. By reducing the OFS to zero, the nutrition algorithm no longer considers the organism's objective function in it's solution (unless it is specified as an ROI). This concept is demonstrated in the code below. For more details regarding OFS, see the Methods section of Weston and Thiele [1].</span></div><div class="CodeBlock"><div class="inlineWrapper"><div  class = 'S2'><span style="white-space: pre"><span >clear </span><span style="color: rgb(167, 9, 245);">options</span></span></div></div><div class="inlineWrapper"><div  class = 'S12'><span style="white-space: pre"><span >options.roiWeights=10;</span></span></div></div><div class="inlineWrapper"><div  class = 'S12'><span style="white-space: pre"><span >options.targetedDietRxns={</span><span style="color: rgb(167, 9, 245);">'Diet_EX_FM_e'</span><span >,1;</span><span style="color: rgb(167, 9, 245);">'Diet_EX_SBM_e'</span><span >,1;</span><span style="color: rgb(167, 9, 245);">'Diet_EX_BSF_e'</span><span >,1} ;</span></span></div></div><div class="inlineWrapper outputs"><div  class = 'S3'><span style="white-space: pre"><span >[newDietModel,pointsModel,roiFlux,pointsModelSln,menuChanges,detailedAnalysis]=nutritionAlgorithm(mainSalmon,{</span><span style="color: rgb(167, 9, 245);">'N_Track'</span><span >},{</span><span style="color: rgb(167, 9, 245);">'min'</span><span >},options);</span></span></div><div  class = 'S4'><div class="inlineElement eoOutputWrapper disableDefaultGestureHandling embeddedOutputsTextElement" uid="8AA68BF7" prevent-scroll="true" data-testid="output_43" tabindex="-1" style="width: 1145px; white-space: pre; font-style: normal; color: rgb(33, 33, 33); font-size: 12px;"><div class=" textElement eoOutputContent" tabindex="-1" data-previous-available-width="1108" data-previous-scroll-height="61" data-hashorizontaloverflow="false" role="article" aria-roledescription="Use Browse Mode to explore " aria-description="text output " style="max-height: 261px; white-space: pre; font-style: normal; color: rgb(33, 33, 33); font-size: 12px;">_____________________________________________________
Solution points =7.8976
1.9912 come from diet
5.9064 come from rois</div></div><div class="inlineElement eoOutputWrapper disableDefaultGestureHandling embeddedOutputsVariableTableElement" uid="17ED3305" prevent-scroll="true" data-testid="output_44" tabindex="-1" style="width: calc(100% - 5px);"><div class="outputLayer selectedOutputDecorationLayer doNotExport" aria-hidden="true"></div><div class="outputLayer activeOutputDecorationLayer doNotExport" aria-hidden="true"></div><div class="outputLayer scrollableOutputDecorationLayer doNotExport" aria-hidden="true"></div><div class="outputLayer navigationFocusLayer doNotExport" aria-hidden="false" role="application" tabindex="-1"></div><div class="ClientDocument veSpecifier table DataFitToViewport" id="variableeditor_client_Document_12" widgetid="variableeditor_client_Document_12" tabindex="0" aria-labelledby="variableeditor_views_SummaryBar_12"><div class="summaryBar" style="font-size: 12px; font-family: Consolas, Inconsolata, Menlo, monospace;"><span>menuChanges = </span><span style="color: rgb(179, 179, 179); font-style: normal;">4×2 table </span></div><div id="variableeditor_TableViewModel_12" widgetid="variableeditor_TableViewModel_12" class="table lightWeightView ClientViewDiv hasSummaryBar" data-viewid="__1" style="width: 100%; overflow: auto;"><table cellspacing="0" style="border-spacing: 0px; border-collapse: collapse;"><thead><tr><th rowspan="1" style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 34px; border: 1px solid rgb(191, 191, 191); text-align: left; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span></span></th><th style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 86px; min-width: 86px; max-width: 86px; border: 1px solid rgb(191, 191, 191); text-align: center; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span>Food&nbsp;Rxn</span></th><th style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 75px; min-width: 75px; max-width: 75px; border: 1px solid rgb(191, 191, 191); text-align: center; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span>Flux</span></th></tr></thead><tbody><tr><th style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 34px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span>1</span></th><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 86px; min-width: 86px; max-width: 86px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>'Food_Removed_EX_BSF_e'</span></td><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 75px; min-width: 75px; max-width: 75px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>-0.3336</span></td></tr><tr><th style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 34px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span>2</span></th><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 86px; min-width: 86px; max-width: 86px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>'Food_Removed_EX_FM_e'</span></td><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 75px; min-width: 75px; max-width: 75px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>-0.1131</span></td></tr><tr><th style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 34px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span>3</span></th><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 86px; min-width: 86px; max-width: 86px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>'Food_Removed_EX_SBM_e'</span></td><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 75px; min-width: 75px; max-width: 75px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>-1.0000</span></td></tr><tr><th style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 34px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span>4</span></th><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 86px; min-width: 86px; max-width: 86px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>'Food_Removed_EX_chol_e'</span></td><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 75px; min-width: 75px; max-width: 75px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>-0.5446</span></td></tr></tbody></table></div></div></div><div class="inlineElement eoOutputWrapper disableDefaultGestureHandling embeddedOutputsTextElement" uid="51286BBA" prevent-scroll="true" data-testid="output_45" tabindex="-1" style="width: 1145px; white-space: pre; font-style: normal; color: rgb(33, 33, 33); font-size: 12px;"><div class=" textElement eoOutputContent" tabindex="-1" data-previous-available-width="1108" data-previous-scroll-height="120" data-hashorizontaloverflow="false" role="article" aria-roledescription="Use Browse Mode to explore " aria-description="text output " style="max-height: 261px; white-space: pre; font-style: normal; color: rgb(33, 33, 33); font-size: 12px;">Points Simulation Solution:
   N_Track flux = 0.59064
Detailed Analysis:
 Original objective max flux =1.6135 &amp; New objective max flux =1.6135
 N_Track
   Original Diet RoI range = 3.7975:9.8893
   New Diet RoI range = 0.59064:2.0625
_____________________________________________________</div></div></div></div><div class="inlineWrapper"><div  class = 'S9'><span style="white-space: pre"><span >options.OFS=0.5;</span></span></div></div><div class="inlineWrapper outputs"><div  class = 'S3'><span style="white-space: pre"><span >[newDietModel,pointsModel,roiFlux,pointsModelSln,menuChanges,detailedAnalysis]=nutritionAlgorithm(mainSalmon,{</span><span style="color: rgb(167, 9, 245);">'N_Track'</span><span >},{</span><span style="color: rgb(167, 9, 245);">'min'</span><span >},options);</span></span></div><div  class = 'S4'><div class="inlineElement eoOutputWrapper disableDefaultGestureHandling embeddedOutputsTextElement" uid="23147F51" prevent-scroll="true" data-testid="output_46" tabindex="-1" style="width: 1145px; white-space: pre; font-style: normal; color: rgb(33, 33, 33); font-size: 12px;"><div class=" textElement eoOutputContent" tabindex="-1" data-previous-available-width="1108" data-previous-scroll-height="61" data-hashorizontaloverflow="false" role="article" aria-roledescription="Use Browse Mode to explore " aria-description="text output " style="max-height: 261px; white-space: pre; font-style: normal; color: rgb(33, 33, 33); font-size: 12px;">_____________________________________________________
Solution points =4.6459
3.2914 come from diet
1.3545 come from rois</div></div><div class="inlineElement eoOutputWrapper disableDefaultGestureHandling embeddedOutputsVariableTableElement" uid="3ED06613" prevent-scroll="true" data-testid="output_47" tabindex="-1" style="width: calc(100% - 5px);"><div class="outputLayer selectedOutputDecorationLayer doNotExport" aria-hidden="true"></div><div class="outputLayer activeOutputDecorationLayer doNotExport" aria-hidden="true"></div><div class="outputLayer scrollableOutputDecorationLayer doNotExport" aria-hidden="true"></div><div class="outputLayer navigationFocusLayer doNotExport" aria-hidden="false" role="application" tabindex="-1"></div><div class="ClientDocument veSpecifier table DataFitToViewport" id="variableeditor_client_Document_13" widgetid="variableeditor_client_Document_13" tabindex="0" aria-labelledby="variableeditor_views_SummaryBar_13"><div class="summaryBar" style="font-size: 12px; font-family: Consolas, Inconsolata, Menlo, monospace;"><span>menuChanges = </span><span style="color: rgb(179, 179, 179); font-style: normal;">4×2 table </span></div><div id="variableeditor_TableViewModel_13" widgetid="variableeditor_TableViewModel_13" class="table lightWeightView ClientViewDiv hasSummaryBar" data-viewid="__1" style="width: 100%; overflow: auto;"><table cellspacing="0" style="border-spacing: 0px; border-collapse: collapse;"><thead><tr><th rowspan="1" style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 34px; border: 1px solid rgb(191, 191, 191); text-align: left; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span></span></th><th style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 86px; min-width: 86px; max-width: 86px; border: 1px solid rgb(191, 191, 191); text-align: center; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span>Food&nbsp;Rxn</span></th><th style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 75px; min-width: 75px; max-width: 75px; border: 1px solid rgb(191, 191, 191); text-align: center; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span>Flux</span></th></tr></thead><tbody><tr><th style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 34px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span>1</span></th><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 86px; min-width: 86px; max-width: 86px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>'Food_Removed_EX_BSF_e'</span></td><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 75px; min-width: 75px; max-width: 75px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>-0.8135</span></td></tr><tr><th style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 34px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span>2</span></th><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 86px; min-width: 86px; max-width: 86px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>'Food_Removed_EX_FM_e'</span></td><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 75px; min-width: 75px; max-width: 75px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>-0.4556</span></td></tr><tr><th style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 34px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span>3</span></th><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 86px; min-width: 86px; max-width: 86px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>'Food_Removed_EX_SBM_e'</span></td><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 75px; min-width: 75px; max-width: 75px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>-1.0000</span></td></tr><tr><th style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 34px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span>4</span></th><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 86px; min-width: 86px; max-width: 86px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>'Food_Removed_EX_chol_e'</span></td><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 75px; min-width: 75px; max-width: 75px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>-1.0223</span></td></tr></tbody></table></div></div></div><div class="inlineElement eoOutputWrapper disableDefaultGestureHandling embeddedOutputsTextElement" uid="773DA8B1" prevent-scroll="true" data-testid="output_48" tabindex="-1" style="width: 1145px; white-space: pre; font-style: normal; color: rgb(33, 33, 33); font-size: 12px;"><div class=" textElement eoOutputContent" tabindex="-1" data-previous-available-width="1108" data-previous-scroll-height="120" data-hashorizontaloverflow="false" role="article" aria-roledescription="Use Browse Mode to explore " aria-description="text output " style="max-height: 261px; white-space: pre; font-style: normal; color: rgb(33, 33, 33); font-size: 12px;">Points Simulation Solution:
   N_Track flux = 0.13545
Detailed Analysis:
 Original objective max flux =1.6135 &amp; New objective max flux =0.80674
 N_Track
   Original Diet RoI range = 3.7975:9.8893
   New Diet RoI range = 0.13545:0.82202
_____________________________________________________</div></div></div></div><div class="inlineWrapper"><div  class = 'S9'><span style="white-space: pre"><span >options.OFS=0;</span></span></div></div><div class="inlineWrapper outputs"><div  class = 'S3'><span style="white-space: pre"><span >[newDietModel,pointsModel,roiFlux,pointsModelSln,menuChanges,detailedAnalysis]=nutritionAlgorithm(mainSalmon,{</span><span style="color: rgb(167, 9, 245);">'N_Track'</span><span >},{</span><span style="color: rgb(167, 9, 245);">'min'</span><span >},options);</span></span></div><div  class = 'S4'><div class="inlineElement eoOutputWrapper disableDefaultGestureHandling embeddedOutputsTextElement" uid="A6D63E89" prevent-scroll="true" data-testid="output_49" tabindex="-1" style="width: 1145px; white-space: pre; font-style: normal; color: rgb(33, 33, 33); font-size: 12px;"><div class=" textElement eoOutputContent" tabindex="-1" data-previous-available-width="1108" data-previous-scroll-height="61" data-hashorizontaloverflow="false" role="article" aria-roledescription="Use Browse Mode to explore " aria-description="text output " style="max-height: 261px; white-space: pre; font-style: normal; color: rgb(33, 33, 33); font-size: 12px;">_____________________________________________________
Solution points =4.5
4.5 come from diet
0 come from rois</div></div><div class="inlineElement eoOutputWrapper disableDefaultGestureHandling embeddedOutputsVariableTableElement" uid="DF5D1490" prevent-scroll="true" data-testid="output_50" tabindex="-1" style="width: calc(100% - 5px);"><div class="outputLayer selectedOutputDecorationLayer doNotExport" aria-hidden="true"></div><div class="outputLayer activeOutputDecorationLayer doNotExport" aria-hidden="true"></div><div class="outputLayer scrollableOutputDecorationLayer doNotExport" aria-hidden="true"></div><div class="outputLayer navigationFocusLayer doNotExport" aria-hidden="false" role="application" tabindex="-1"></div><div class="ClientDocument veSpecifier table DataFitToViewport" id="variableeditor_client_Document_14" widgetid="variableeditor_client_Document_14" tabindex="0" aria-labelledby="variableeditor_views_SummaryBar_14"><div class="summaryBar" style="font-size: 12px; font-family: Consolas, Inconsolata, Menlo, monospace;"><span>menuChanges = </span><span style="color: rgb(179, 179, 179); font-style: normal;">4×2 table </span></div><div id="variableeditor_TableViewModel_14" widgetid="variableeditor_TableViewModel_14" class="table lightWeightView ClientViewDiv hasSummaryBar" data-viewid="__1" style="width: 100%; overflow: auto;"><table cellspacing="0" style="border-spacing: 0px; border-collapse: collapse;"><thead><tr><th rowspan="1" style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 34px; border: 1px solid rgb(191, 191, 191); text-align: left; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span></span></th><th style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 86px; min-width: 86px; max-width: 86px; border: 1px solid rgb(191, 191, 191); text-align: center; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span>Food&nbsp;Rxn</span></th><th style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 75px; min-width: 75px; max-width: 75px; border: 1px solid rgb(191, 191, 191); text-align: center; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span>Flux</span></th></tr></thead><tbody><tr><th style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 34px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span>1</span></th><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 86px; min-width: 86px; max-width: 86px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>'Food_Removed_EX_BSF_e'</span></td><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 75px; min-width: 75px; max-width: 75px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>-1.0000</span></td></tr><tr><th style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 34px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span>2</span></th><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 86px; min-width: 86px; max-width: 86px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>'Food_Removed_EX_FM_e'</span></td><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 75px; min-width: 75px; max-width: 75px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>-1.0000</span></td></tr><tr><th style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 34px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span>3</span></th><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 86px; min-width: 86px; max-width: 86px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>'Food_Removed_EX_SBM_e'</span></td><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 75px; min-width: 75px; max-width: 75px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>-1.0000</span></td></tr><tr><th style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 6px 3px 3px; width: 34px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left; background-color: rgb(245, 245, 245); color: rgba(0, 0, 0, 0.75); font-weight: 700; box-sizing: border-box;"><span>4</span></th><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 86px; min-width: 86px; max-width: 86px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>'Food_Removed_EX_chol_e'</span></td><td style="text-overflow: ellipsis; font-family: Arial, sans-serif; font-size: 12px; overflow: hidden; white-space: nowrap; padding: 3px; width: 75px; min-width: 75px; max-width: 75px; border-width: 0px 1px 1px; border-style: solid; border-color: rgb(191, 191, 191); border-image: initial; text-align: left;"><span>-1.5000</span></td></tr></tbody></table></div></div></div><div class="inlineElement eoOutputWrapper disableDefaultGestureHandling embeddedOutputsTextElement" uid="424F1F3C" prevent-scroll="true" data-testid="output_51" tabindex="-1" style="width: 1145px; white-space: pre; font-style: normal; color: rgb(33, 33, 33); font-size: 12px;"><div class=" textElement eoOutputContent" tabindex="-1" data-previous-available-width="1108" data-previous-scroll-height="120" data-hashorizontaloverflow="false" role="article" aria-roledescription="Use Browse Mode to explore " aria-description="text output " style="max-height: 261px; white-space: pre; font-style: normal; color: rgb(33, 33, 33); font-size: 12px;">Points Simulation Solution:
   N_Track flux = 0
Detailed Analysis:
 Original objective max flux =1.6135 &amp; New objective max flux =0
 N_Track
   Original Diet RoI range = 3.7975:9.8893
   New Diet RoI range = 0:0
_____________________________________________________</div></div></div></div><div class="inlineWrapper"><div  class = 'S5'><span style="white-space: pre"><span >clear </span><span style="color: rgb(167, 9, 245);">options</span></span></div></div></div><div  class = 'S8'><span>As you can see, by setting OFS to zero the new diet provides a solution that corresponds to a maximal biomass flux (i.e, the objective flux) of zero.</span></div><h2  class = 'S6'><span>Working with More Sophisticated Objective Functions:</span></h2><div  class = 'S1'><span>The nutrition algorithm was originally developed with simple objective functions in mind (i.e., only one non-zero value in the c vector). To impliment more sophisticated objective functions, on can integrate the objective function into the S matrix with the function "integrate_cVector_into_model". This functon creates a new metabolite and reaction representing the objective function and updates the c-vector such that it is compatible with the nutrition algorithm. To demonstrate the equivalence of the models, let's try simulating a model with and without the modification and evaluate the solutions.</span></div><div class="CodeBlock"><div class="inlineWrapper"><div  class = 'S2'><span style="white-space: pre"><span >newmodel=integrate_cVector_into_model(mainSalmon);</span></span></div></div><div class="inlineWrapper"><div  class = 'S12'><span style="white-space: pre"><span >clear </span><span style="color: rgb(167, 9, 245);">options</span></span></div></div><div class="inlineWrapper"><div  class = 'S12'><span style="white-space: pre"><span >options.roiWeights=10;</span></span></div></div><div class="inlineWrapper"><div  class = 'S12'><span style="white-space: pre"><span >options.display=</span><span style="color: rgb(167, 9, 245);">'off'</span><span >;</span></span></div></div><div class="inlineWrapper"><div  class = 'S12'><span style="white-space: pre"><span >options.targetedDietRxns={</span><span style="color: rgb(167, 9, 245);">'Diet_EX_FM_e'</span><span >,1;</span><span style="color: rgb(167, 9, 245);">'Diet_EX_SBM_e'</span><span >,1;</span><span style="color: rgb(167, 9, 245);">'Diet_EX_BSF_e'</span><span >,1};</span></span></div></div><div class="inlineWrapper"><div  class = 'S12'><span style="white-space: pre"><span >[~,~,~,salmonModelSln,~,~]=nutritionAlgorithm(mainSalmon,{</span><span style="color: rgb(167, 9, 245);">'N_Track'</span><span >},{</span><span style="color: rgb(167, 9, 245);">'min'</span><span >},options);</span></span></div></div><div class="inlineWrapper"><div  class = 'S12'><span style="white-space: pre"><span >[~,~,~,newModelSln,~,~]=nutritionAlgorithm(newmodel,{</span><span style="color: rgb(167, 9, 245);">'N_Track'</span><span >},{</span><span style="color: rgb(167, 9, 245);">'min'</span><span >},options);</span></span></div></div><div class="inlineWrapper outputs"><div  class = 'S3'><span style="white-space: pre"><span >abs(salmonModelSln.f-newModelSln.f)&lt;1e-8 </span><span style="color: rgb(0, 128, 19);">%is the solution difference less than expected numerical error? The answer is yes</span></span></div><div  class = 'S4'><div class="inlineElement eoOutputWrapper disableDefaultGestureHandling embeddedOutputsVariableStringElement" uid="E45BE580" prevent-scroll="true" data-testid="output_52" tabindex="-1" style="width: 1145px; white-space: pre; font-style: normal; color: rgb(33, 33, 33); font-size: 12px;"><div class="textElement eoOutputContent" tabindex="-1" data-previous-available-width="1108" data-previous-scroll-height="35" data-hashorizontaloverflow="false" role="article" aria-roledescription="Use Browse Mode to explore " aria-description="variable output " style="max-height: 261px; white-space: pre; font-style: normal; color: rgb(33, 33, 33); font-size: 12px;"><div style="white-space: pre; font-style: normal; color: rgb(33, 33, 33); font-size: 12px;"><span class="variableNameElement" style="white-space: pre; font-style: normal; color: rgb(33, 33, 33); font-size: 12px;">ans = <span class="headerElement" style="white-space: pre; font-style: normal; color: rgb(33, 33, 33); font-size: 12px;">logical</span></span></div><div style="white-space: pre; font-style: normal; color: rgb(33, 33, 33); font-size: 12px;">   1
</div></div></div></div></div></div><div  class = 'S8'><span>As you can see, the difference in points produced between the two solution is less than Matlab's numerical error, indicating that the two solutions are equivalent. Now lets try a more sophisticated objective functon... we may be interested in minimizing respiration rate (reaction 546) while maximizing growth rate to achieve a more conservative metabolism. After simulation, we can see that the resperation rate in our solution is significantly different from before modifying the objective function. </span></div><div class="CodeBlock"><div class="inlineWrapper"><div  class = 'S2'><span style="white-space: pre"><span >testModel=mainSalmon;</span></span></div></div><div class="inlineWrapper"><div  class = 'S12'><span style="white-space: pre"><span >testModel.c(546)=-1;</span></span></div></div><div class="inlineWrapper"><div  class = 'S12'><span style="white-space: pre"><span >testModel=integrate_cVector_into_model(testModel);</span></span></div></div><div class="inlineWrapper"><div  class = 'S12'><span style="white-space: pre"><span >[~,~,~,pointsModelSln,~,~]=nutritionAlgorithm(testModel,{</span><span style="color: rgb(167, 9, 245);">'N_Track'</span><span >},{</span><span style="color: rgb(167, 9, 245);">'min'</span><span >},options);</span></span></div></div><div class="inlineWrapper outputs"><div  class = 'S3'><span style="white-space: pre"><span >abs(pointsModelSln.v(546)-newModelSln.v(546))&lt;1e-8 </span><span style="color: rgb(0, 128, 19);">%is the solution difference less than expected numerical error? The answer is no</span></span></div><div  class = 'S4'><div class="inlineElement eoOutputWrapper disableDefaultGestureHandling embeddedOutputsVariableStringElement" uid="8317CDDD" prevent-scroll="true" data-testid="output_53" tabindex="-1" style="width: 1145px; white-space: pre; font-style: normal; color: rgb(33, 33, 33); font-size: 12px;"><div class="textElement eoOutputContent" tabindex="-1" data-previous-available-width="1108" data-previous-scroll-height="35" data-hashorizontaloverflow="false" role="article" aria-roledescription="Use Browse Mode to explore " aria-description="variable output " style="max-height: 261px; white-space: pre; font-style: normal; color: rgb(33, 33, 33); font-size: 12px;"><div style="white-space: pre; font-style: normal; color: rgb(33, 33, 33); font-size: 12px;"><span class="variableNameElement" style="white-space: pre; font-style: normal; color: rgb(33, 33, 33); font-size: 12px;">ans = <span class="headerElement" style="white-space: pre; font-style: normal; color: rgb(33, 33, 33); font-size: 12px;">logical</span></span></div><div style="white-space: pre; font-style: normal; color: rgb(33, 33, 33); font-size: 12px;">   0
</div></div></div></div></div></div><h2  class = 'S6'><span style=' text-decoration: underline;'>Citations:</span></h2><div  class = 'S1'><span>[1] Weston &amp; Thiele 2022. "A nutrition algorithm to optimize feed and medium composition using genome-scale metabolic models." </span><span style=' font-style: italic;'>Metabolic Engineering.</span></div><div  class = 'S1'><span>[2] Heirendt, Laurent, et al. "Creation and analysis of biochemical constraint-based models using the COBRA Toolbox v. 3.0." </span><span style=' font-style: italic;'>Nature protocols</span><span> 14.3 (2019): 639-702.</span></div><div  class = 'S1'><span>[3] Zakhartsev, Maksim, et al. "SALARECON connects the Atlantic salmon genome to growth and feed efficiency." </span><span style=' font-style: italic;'>PLOS Computational Biology</span><span> 18.6 (2022): e1010194.</span></div><div  class = 'S1'></div>
<br>
<!-- 
##### SOURCE BEGIN #####
%% *Nutrition Algorithm Walkthrough*
% *Authors: Bronson R. Weston and Bram Nap, University of Galway.*

%initCobraToolbox() 
changeCobraSolver('ibm_cplex') % change solver if necessary
clear options
%% Background:
% The nutrition algorithm seeks to identify the minimal changes to a diet/feed/medium 
% to achieve the largest shift in flux for one or more reactions of interest (ROIs). 
% The algorithm produces points when adding or removing nutrients from the diet/feed/medium. 
% It also produces or consumes points when minimizing or maximizing ROI fluxes, 
% respectively. Overall, the goal of the algorithm is to minimize the total points 
% accumulated (_p_), such that:
% 
% $$p=w^{\mathrm{a}} {\;v}^{\mathrm{a}} +w^{\mathrm{r}} v^{\mathrm{r}} +\left(m{\;\odot 
% w}^{\textrm{roi}} \right)v^{\textrm{roi}} \ldotp$$
% 
% _w^_a and _v^_a denote  the weight and the flux of the “Food Added” dietary 
% reactions, respectively. _w^_r and _v^_r denote to the weight and the flux of 
% the “Food Removal” reactions, respectively. w^roi and v^roi are the weight and 
% flux for the ROIs. By default,  _w_ and _v_ are vectors of ones, unless manually 
% weighted via the optional struct inputs, as discussed later. Finally, _m_ is 
% a vector defining if an ROI is to be minimized or maximized. Thus, for a given 
% ROI, the corresponding element in _m_ will be equal to -1 or 1 depending on 
% if the goal is to maximize or minimize the ROI, respectively. For the full technical 
% details pertaining to the nutrition algorithm formulation, see Weston and Thiele, 
% 2022 [1].
% 
% The nutrition algorithm is implemented in the nutritionAlgorithm.m function 
% in the COBRA Toolbox [2]. The function is highly versatile, allowing the user 
% to customize their solution specifications as they feel fit. In this walkthrough, 
% the different strategies for utilizing the nutrition algorithm will be demonstrated 
% on a genome-scale metabolic reconstruction (GEM) of Atlantic salmon (S_almo 
% solar),_ called SALARECON [3].
%% Setting up GEM for use:
% A typical GEM includes a compartment representing extracellular space and 
% a series of exchange reactions that permit flux, both, into and out of the extracellular 
% space. For the nutrition algorithm to run properly two modifications are required 
% to this "typical GEM". First, all reversable exchange reactions must be broken 
% apart into two seperate reactions, each modelling a different direction of flux. 
% Second, all reactions permitting flux of nutrients into the model must be labeled 
% with 'Diet_EX_' at the  beginning of the reaction name to be recognized as dietary 
% reactions (i.e., targeted reactions) by the algorithm. For instance, an exchange 
% reaction for glutamate labelled 'EX_glu[e]' should be labeled 'Diet_EX_glu[e]'. 
% It is also recommended that every dietary reaction has a corresponding "Exit" 
% reaction (i.e., a secretion reaction that allows flux of the nutrient out of 
% the model) and that diet reaction fluxes have a fixed flux (i.e., lb=ub). This 
% option is favored over flexible exchange bounds as it permits the algorithm 
% to analyze and optimize an initial fixed "diet" while maintianing flexible exchange 
% flux by allowing the organism to choose not to uptake certain nutrieints through 
% the exit reactions.
% 
% To convert a typical GEM, as described earleir, into a suitable format for 
% the nutrition algorithm, the user can utilize the function, convert_EX_to_diet, 
% as follows:

load('NAW_salarecon.mat','model'); %initial salmon model has typical EX_ reactions 
mainSalmon= convert_EX_to_diet(model); % convert salmon to model with dietary reactions
%% 
% To briefly demonstrate the equivalence of the two models, let's simulate both 
% models optimizing for biomass :

sln1=optimizeCbModel(model); %Optimize "typical" GEM with exchange reactions
sln1.f
sln2=optimizeCbModel(mainSalmon); %Optimize diet-based model
sln2.f
%% nutritionAlgorithm.m Inputs and Outputs:
% The nutritionAlgorithm.m function takes four inputs. (1) the GEM (model), 
% (2) a cell array containing the ROIS (or a string is acceptible if using only 
% one ROI), (3) a cell array containing the minimization and maximization goals 
% for each reaction of interest (a string is acceptible if using only one ROI) 
% and (4) a struct containing special augmentation commands to the algorithm (options) 
% which will be discussed in more detail in the following sections. Note that 
% the options struct is only necessary for custimizing the algorithm performance, 
% and the algorithm runs sufficiently with only the first three inputs as well. 
% Shown below is an example where the nutrition algorithm is asked to maximize 
% the Biomass reaction in the mainSalmon model:

[newDietModel,pointsModel,roiFlux,pointsModelSln,menuChanges,detailedAnalysis]=nutritionAlgorithm(mainSalmon,'Biomass','max');
%% 
% The nutrition algorithm outputs six objects and prints a display containing 
% details of the solution. First, let's cover the display contents. The first 
% three lines details the point value produced by the solution and the number 
% of points produced (positive value) or consumed (negative) value by the diet 
% and the ROIs. A table is also displayed regarding the recommended dietary changes 
% and a description of the reaction of interest fluxes is provided. In this case, 
% the algorithm recommends adding 0.3 mmol of phosphate to the diet to acheive 
% a Biomass flux of 2.1. 
% 
% Finally, a more in depth analysis is provided that examines the potential 
% range in fluxes for the ROIs on the original diet compared to the new diet. 
% This describes that a flux variablity of 0 to 1.61 grams of Biomass flux was 
% achievable on the original diet in comparision to 0 to 2.1 grams on the new 
% diet. 
% 
% The outputs of the model include (1) an updated version of the original inputted 
% model that includes changes to the bounds of the dietary reactions to reflect 
% suggestions of the algorithm (newDietModel), (2) a version of the model (pointsModel) 
% that is augmented to include Food_Added, Food_Removed and points relevant reactions 
% (i.e., the model that is actually used to find the optimal diet), (3) the flux 
% of the reactions of interest in the points solution (roiFlux), (4) the overall 
% points model solution (pointsModelSln), (5) a summary of the optimal dietary 
% changes (menuChanges) and (6) a struct containing the solution results for each 
% simulation behind the detailed analysis. Each of outputs can be helpful to explore 
% the model solution. For instance, pointsModel and pointsModelSln can be used 
% together to explore the points model solution:

surfNet(pointsModel,'point[P]',[],pointsModelSln.v)
%% Manipulating Nutrition Algorithm Outputs:
% 
% 
% There are two ways that the outputs of the algorithm can be manipulated. The 
% first is that the command window outputs can be turned off using the options 
% struct as follows:

options.display='off';
[newDietModel,pointsModel,roiFlux,pointsModelSln,menuChanges,detailedAnalysis]=nutritionAlgorithm(mainSalmon,'Biomass','max',options);
%% 
% Another option is to turn off the detailed analysis. This is useful to enhance 
% the speed of the function if the user is not interested in investigating the 
% solution flux variability:

options.slnType='Quick';
tic
nutritionAlgorithm(mainSalmon,'Biomass','max',options);
qSln=toc
options.slnType='Detailed';
tic
nutritionAlgorithm(mainSalmon,'Biomass','max',options);
dSln=toc
%% Weighting Reaction of Interest:
% As the nutrition algorithm aims to strike a balance between shifting diet 
% and driving metabolic change, it may be of the interest for the user to manipulate 
% how the algorithm finds that balance. To do so, an easy method is to adjust 
% the weighting of the reaction of interest through the options struct variable. 
% While the default weighting for each ROI is equal to one, in this example we 
% show how to increase the weight of ‘Biomass’ to five.

clear options
options.roiWeights=5;
[newDietModel,pointsModel,roiFlux,pointsModelSln,menuChanges,detailedAnalysis]=nutritionAlgorithm(mainSalmon,'Biomass','max',options);
%% 
% Under these new weighting conditions (Fig 2B) the algorithm recommends adding 
% fish meal, choline, phosphate and thymidine to achieve a new biomass flux of 
% 4.5 grams a day.  The initial default weighting of one resulting in the recomendation 
% of only adding phosphate to achieve biomass flux of 2.1 grams a day. In short, 
% increasing the weight of a reaction of interest encourages the algorithm to 
% find more extreme shifts in a ROI at the cost of permitting larger changes to 
% the initial diet. 
%% Targeting Multiple reactions of Interest:
% Perhaps the most powerful feature of the nutrition algorithm is its ability 
% to optimize feed to target multiple ROIs simultaneously. In the case of salmon, 
% a farmer might like to identify a feed that maximizes growth rate and minimizes 
% nitrogen waste at the same time. This scenario can be specified as follows:

clear options
mainSalmon=addElementTracker(mainSalmon,'N','Exit'); % Add nitrogen waste reaction to track nitrogen excretion rate
[newDietModel,pointsModel,roiFlux,pointsModelSln,menuChanges,detailedAnalysis]=nutritionAlgorithm(mainSalmon,{'Biomass','N_Track'},{'max','min'});
%% 
% As you can see, the algorithm simultaneously optimized the diet such that 
% the new diet's corresponding nitrogen waste flux is reduced the new biomass 
% is greater than the original.
% 
% Note that, in general this analysis assumes that an organism's objective function 
% is maximized and the variability analyis provides the flux solutions feasible 
% at that maximal objective function flux. Thus, the nitrogen waste reported for 
% the original diet and the new diet corresponded to a biomass flux of 1.6135 
% and 1.9517, respectively. However, if the ROI is the objective function, such 
% as in this case, then the analysis is not restricted to a maximal objective 
% function flux. This is why the biomass is reported as a range of values rather 
% than just the maximal.
%% 
%% Limiting Solution Space:
% The nutrition algorithm tracks the points produced from adding and removing 
% food. The user can leverage this to to impose specific limits to the solution 
% space to restrict the flux of total points produced from either adding food 
% or removing it:

clear options
options.foodAddedLimit=1;
[newDietModel,pointsModel,roiFlux,pointsModelSln,menuChanges,detailedAnalysis]=nutritionAlgorithm(mainSalmon,{'Biomass','N_Track'},{'max','min'},options);
%% 
% If you take the summation of flux, you will find that it adds up to one for 
% the foodAdded reactions, but it also removes food as well. If you would like 
% to further restrict the solution to not remove any food you can do so as follows:

options.foodAddedLimit=1;
options.foodRemovedLimit=0;
[newDietModel,pointsModel,roiFlux,pointsModelSln,menuChanges,detailedAnalysis]=nutritionAlgorithm(mainSalmon,{'Biomass','N_Track'},{'max','min'},options);
%% Customizing Weighting Scheme of Targeted Food Items:
% In many scenarios, it may be desirable to weight individual food items or 
% to restrict the solution to only adding specific food items of interest. These 
% types of modifications can be made using the optional variable, targetedFoodItems, 
% which is a cell array where the specific dietary reactions are listed in the 
% first column and the corresponding weights are listed in the second. Let's restrict 
% our solution space to only consider manipulating the feed rate of fish meal 
% (FM), soybean meal  (SBM) or black soldier fly (BSF)  meal and assign each variable 
% a weight of one: 

clear options
options.targetedDietRxns={'Diet_EX_FM_e',1;'Diet_EX_SBM_e',1;'Diet_EX_BSF_e',1} ;
[newDietModel,pointsModel,roiFlux,pointsModelSln,menuChanges,detailedAnalysis]=nutritionAlgorithm(mainSalmon,{'Biomass','N_Track'},{'max','min'},options);
%% 
% In this case algorithm suggests optimal amounts of black soldier fly and fish 
% meal to remove from the diet to maintain growth rate and simultaneously reduce 
% nitrogen waste. Note that the model initial state specifies a feed of 1 gram 
% of each type of meal (i.e., fish meal, soybean meal and black soldier fly meal). 
% 
% It may also be of interest to specify the weights of a few dietary reactions 
% but assign all other dietary reactions to a specific weight. In this case, let's 
% set all of the feed meals a weight of 1 and all other dietary reactions a weight 
% of 0.1:

options.targetedDietRxns={'Diet_EX_FM_e',1;'Diet_EX_SBM_e',1;'Diet_EX_BSF_e',1; 'All', 0.1} ;
[newDietModel,pointsModel,roiFlux,pointsModelSln,menuChanges,detailedAnalysis]=nutritionAlgorithm(mainSalmon,{'Biomass','N_Track'},{'max','min'},options);
%% 
%% Customizing Weighting of Food Removal Reactions:
% nutritionAlgorithm.m also allows a user to explicitely modify the weighting 
% of food removal reactions. By default, food removal reactions are created for 
% all dietary reactions with a lb < 0 and each food removal reaction is assigned 
% a weight of one. Before demonstrating the methods to customize food removal 
% weighting, let's make things interesting by assigning a weighting scheme that 
% results in a solution that identifies flux for food removal and food adding 
% reactions:

clear options
options.roiWeights=[50 10];
options.targetedDietRxns={'Diet_EX_FM_e',0.1;'Diet_EX_SBM_e',0.1;'Diet_EX_BSF_e',0.1; 'All' 15};
[newDietModel,pointsModel,roiFlux,pointsModelSln,menuChanges,detailedAnalysis]=nutritionAlgorithm(mainSalmon,{'Biomass','N_Track'},{'max','min'},options);
%% 
% The solution specifies removal of choline, soybean meal and fish meal. But 
% what if an aquaculture farmer is only interested in removing fishmeal from the 
% diet? This can be specified by utilizing the foodRemovalWeighting struct field 
% on the options variable. Just like the targetedDietRxns struct field, the foodRemovalWeighting 
% will limit the solution space to only the items entered into the cell array. 

options.foodRemovalWeighting={'Diet_EX_SBM_e',1};
[newDietModel,pointsModel,roiFlux,pointsModelSln,menuChanges,detailedAnalysis]=nutritionAlgorithm(mainSalmon,{'Biomass','N_Track'},{'max','min'},options);
%% 
% It is also an option to tie the foodRemovalWeighting scheme directly to the 
% targetedDietRxns array. By entering the string 'ditto' the weighting becomes 
% equivalent between the two cell arrays:

options.foodRemovalWeighting='ditto';
[newDietModel,pointsModel,roiFlux,pointsModelSln,menuChanges,detailedAnalysis]=nutritionAlgorithm(mainSalmon,{'Biomass','N_Track'},{'max','min'},options);
%% 
% Other string inputs for foodRemovalWeighting include 'inverse' and 'ones'. 
% Inverse simply applies the inverse weights as those in targetedDietRxns and 
% 'ones' keeps the same dietary reactionsn targeted by targetedDietRxns but assigns 
% weights of ones to the removal reactions.
% 
% Note that in the last two examples, the new diet resulted in a nitrogen waste 
% flux that has a much larger possible flux range than the original diet. Indeed, 
% the lower limit of flux was reduced compared to the original diet, but the upper 
% limit has increased. This is a consequence of the fact that the nutrition algorithm 
% only seeks to optimize one bound. In the case of minimization, the nutrition 
% algorithm optimizes the lower limit of flux and for maximization, it optimizes 
% the upper limit. For more details, please see Weston and Thiele, 2022 [1].
%% 
%% Optimizing For Profit:
% Importantly, weighting can either be abstract or tied to real attributes. 
% The default weighting scheme is abstract, as the weights do not correspond to 
% anything palpable. However, it may be of interest to tie weights to quantitatively 
% precise measurements, such as cost. In fact, if both the food item weights and 
% the ROI weights are assigned the same quantitative units, the nutrition algorithm 
% then becomes a method for optimizing towards that quantitative unit. In the 
% case of salmon farming, the goal is likely to optimize profit. Three apsects 
% to profit are the cost of feed, the costs associated with nitrogen waste, and 
% the net salmon meat produce/ sale price. As salmon is sold per mass, the biomass 
% function can be assigned a realistic value to represent the selling price of 
% the fish per gram. In this case, we choose €10 per kg. We can then weight the 
% nitrogen waste reaction with an estimated cost of €0.2 per mol. Finally, the 
% cost of each type of feed can be set to the cost per a gram. We use rough estimates 
% of €1.3 per kg of fishmeal, €0.6 per kg of soybean meal and €3 per kg of black 
% soldier fly meal. As a result, each “point” consumed by the model corresponds 
% to a euro of profit and the algorithm identifies the solution that maximizes 
% the net profit.

clear options
mainSalmonTemp=changeRxnBounds(mainSalmon,{'Diet_EX_FM_e'},0,'b');
mainSalmonTemp=changeRxnBounds(mainSalmonTemp,{'Diet_EX_SBM_e'},0,'b');
mainSalmonTemp=changeRxnBounds(mainSalmonTemp,{'Diet_EX_BSF_e'},0,'b');
options.roiWeights=[10/1000 0.2/1000]; % divided by 1000 to convert from kg to g (for biomass ROI) and mol to mmol (for nitrogen excretion ROI)
options.targetedDietRxns={'Diet_EX_FM_e',1.3/1000;'Diet_EX_SBM_e',0.6/1000;'Diet_EX_BSF_e',3/1000}; %Weights devided by 1000 to convert from kg to grams
[newDietModel,pointsModel,roiFlux,pointsModelSln,menuChanges,detailedAnalysis]=nutritionAlgorithm(mainSalmonTemp,{'Biomass','N_Track'},{'max','min'},options);
%% 
% Here, the algorithm recommends a combination of fish meal and soybean meal 
% at roughly a 1:5 ratio to achieve an estimate profit of €0.015 per day per a 
% fish. Note that the model is set to reflect the growth rate of a 100 gram fish, 
% so as the fish grows larger the feed demand, nitrogen excretion rate and profit 
% margin will all increase linearly. 
% 
% Also note here that the dietary flux of all feed components was intentionally 
% set to zero before simulation. This ensures that all feed consumed by the model 
% produces points (i.e., is correlated to a price) via the foodAdded reactions.
%% 
%% Targetting a Metabolite:
% One may also be interested in optimizing for the synthesis or consumption 
% rate of a particular metabolite. As such, nutritionAlgorithm.m takes any metabolite 
% inputs and creates a sink or demand reaction depending on if the goal is to 
% minimize (i.e., optimize for consumption) or maximize  (i.e., optimize for synthesis) 
% the metabolite, respectively. This feature is demonstrated below utilizing the 
% metabolite, 'Lipids[c]':

clear options
options.roiWeights=100; %weight increased here from default to ensure solution is interesting
[newDietModel,pointsModel,roiFlux,pointsModelSln,menuChanges,detailedAnalysis]=nutritionAlgorithm(mainSalmon,{'Lipids[c]'},{'max'},options);
%% 
% Note that the ROI displayed is 'DM_Lipids[c]' which indicates that it is a 
% demand reaction for the 'Lipid[c]' metabolite.
%% Objective Flux Scalar:
% Sometimes a reaction that the algorithm is asked to optimize can conflict 
% with the flux of an organism's objective function. One way to ensure that the 
% organism's objective function is simultaneously optimized with another ROI is 
% by specifying the objective function as another ROI within the algorithm, as 
% demonstrated in earlier examples. However, another method is through the objective 
% flux scalar (OFS). The OFS is a variable that confines the algorithm to identify 
% a solution in the context of a specific flux for an organism's objective function. 
% An OFS of one (the default value) means that the nutrition algorithm will confine 
% its solution  to have a lower bound for the organism's objective function that 
% is equal to the maximum flux before a dietary change. This ensures that the 
% nutrition algorithm is constrained to make predictions that align with the current 
% objective function performance, and to not identify solutions that conflict 
% with the objective function flux. In some cases, however, it may be permissible 
% to allow a reduced flux for the organism's objective function. In such cases, 
% one may manipulate the OFS. By reducing the OFS to 0.5, the nutrition algorithm 
% constrains its solution such that a flux of half the initial objective function 
% flux is permissable. By reducing the OFS to zero, the nutrition algorithm no 
% longer considers the organism's objective function in it's solution (unless 
% it is specified as an ROI). This concept is demonstrated in the code below. 
% For more details regarding OFS, see the Methods section of Weston and Thiele 
% [1].

clear options
options.roiWeights=10;
options.targetedDietRxns={'Diet_EX_FM_e',1;'Diet_EX_SBM_e',1;'Diet_EX_BSF_e',1} ;
[newDietModel,pointsModel,roiFlux,pointsModelSln,menuChanges,detailedAnalysis]=nutritionAlgorithm(mainSalmon,{'N_Track'},{'min'},options);
options.OFS=0.5;
[newDietModel,pointsModel,roiFlux,pointsModelSln,menuChanges,detailedAnalysis]=nutritionAlgorithm(mainSalmon,{'N_Track'},{'min'},options);
options.OFS=0;
[newDietModel,pointsModel,roiFlux,pointsModelSln,menuChanges,detailedAnalysis]=nutritionAlgorithm(mainSalmon,{'N_Track'},{'min'},options);
clear options
%% 
% As you can see, by setting OFS to zero the new diet provides a solution that 
% corresponds to a maximal biomass flux (i.e, the objective flux) of zero.
%% Working with More Sophisticated Objective Functions:
% The nutrition algorithm was originally developed with simple objective functions 
% in mind (i.e., only one non-zero value in the c vector). To impliment more sophisticated 
% objective functions, on can integrate the objective function into the S matrix 
% with the function "integrate_cVector_into_model". This functon creates a new 
% metabolite and reaction representing the objective function and updates the 
% c-vector such that it is compatible with the nutrition algorithm. To demonstrate 
% the equivalence of the models, let's try simulating a model with and without 
% the modification and evaluate the solutions.

newmodel=integrate_cVector_into_model(mainSalmon);
clear options
options.roiWeights=10;
options.display='off';
options.targetedDietRxns={'Diet_EX_FM_e',1;'Diet_EX_SBM_e',1;'Diet_EX_BSF_e',1};
[~,~,~,salmonModelSln,~,~]=nutritionAlgorithm(mainSalmon,{'N_Track'},{'min'},options);
[~,~,~,newModelSln,~,~]=nutritionAlgorithm(newmodel,{'N_Track'},{'min'},options);
abs(salmonModelSln.f-newModelSln.f)<1e-8 %is the solution difference less than expected numerical error? The answer is yes
%% 
% As you can see, the difference in points produced between the two solution 
% is less than Matlab's numerical error, indicating that the two solutions are 
% equivalent. Now lets try a more sophisticated objective functon... we may be 
% interested in minimizing respiration rate (reaction 546) while maximizing growth 
% rate to achieve a more conservative metabolism. After simulation, we can see 
% that the resperation rate in our solution is significantly different from before 
% modifying the objective function. 

testModel=mainSalmon;
testModel.c(546)=-1;
testModel=integrate_cVector_into_model(testModel);
[~,~,~,pointsModelSln,~,~]=nutritionAlgorithm(testModel,{'N_Track'},{'min'},options);
abs(pointsModelSln.v(546)-newModelSln.v(546))<1e-8 %is the solution difference less than expected numerical error? The answer is no
%% Citations:
% [1] Weston & Thiele 2022. "A nutrition algorithm to optimize feed and medium 
% composition using genome-scale metabolic models." _Metabolic Engineering._
% 
% [2] Heirendt, Laurent, et al. "Creation and analysis of biochemical constraint-based 
% models using the COBRA Toolbox v. 3.0." _Nature protocols_ 14.3 (2019): 639-702.
% 
% [3] Zakhartsev, Maksim, et al. "SALARECON connects the Atlantic salmon genome 
% to growth and feed efficiency." _PLOS Computational Biology_ 18.6 (2022): e1010194.
% 
%
##### SOURCE END #####
-->
</div></body></html>